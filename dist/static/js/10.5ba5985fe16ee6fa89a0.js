webpackJsonp([10],{l8Gi:function(e,t){},xk2Q:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),l=s.n(a),i=s("Usg1"),o=s("NYxO"),r=s("2etn"),c=s("Y+wi"),n=(s("Ruan"),{name:"NewJob",data:function(){return{isTest:!0,form:{name:"",scheduled:!0,schedule:"daily",timezone:"Africa/Accra",country_code:"GH",live:!this.testData,test:this.testData,service_code:"cashin"},beneficiaries:"upload",contactData:[],schedule:{},loading:!1,response:{},files:[],days:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],rules:{description:[{required:!0,message:"This field is required",trigger:"blur"},{min:3,message:"Length should be at least 3 letters",trigger:"blur"}],amount:[{required:!0,message:"This field is required",trigger:"blur"}]}}},created:function(){this.$store.dispatch("getContacts")},computed:l()({},Object(o.b)({contacts:"contacts",file:"file",test:"test",state:"fileState"}),{testData:function(){return this.test},fileUploading:function(){return"LOADING"===this.state},fileError:function(){return"ERROR"===this.state}}),methods:{cancel:function(){this.$router.push("/payments")},save:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){if(e){"createJob",t.form.upload_details={Bucket:r.b,Key:t.file.key},t.form.batch_details={Bucket:r.b,Key:t.file.key},t.form.test=t.test,t.form.dummy=t.test,t.form.live=!t.test;var s=c.a.createJobQuery(t.form.schedule,t.schedule);t.form.schedule=s,t.$store.dispatch("createJob",t.form).then(function(e){e.data.success?(t.$message({type:"success",message:"Job created"}),t.$store.dispatch("getJobs",{cache:!1}),i.a.$emit("tabNumber","3"),t.$router.push("/payments")):t.$message({type:"error",message:e.data.response.message}),t.loading=!1}).catch(function(e){t.loading=!1;var s=e.response;t.$message({message:s.data.error,type:"error"})})}else t.loading=!1,t.$message({message:"Please correct the errors",type:"error"})})},onChange:function(e,t){this.files=t;var s=this.$el.querySelector(".upload-demo input[type='file']").files[0];this.$store.dispatch("sendToBucket",s)}},mounted:function(){i.a.$emit("sideNavClick","payments")}}),d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.fileUploading,expression:"fileUploading"}],class:[{"test-data":e.isTest},"flex","flex-column","card-0","position-relative"],attrs:{"element-loading-text":"Uploading file..."}},[s("div",{staticClass:"flex justify-content-between align-items-center",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"blue-text bold-500 m-0 pb-5"},[e._v("Create a Job")]),e._v(" "),s("div",{staticClass:"standard-button"},[s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans b-0",attrs:{size:"mini"},on:{click:e.cancel}},[e._v("Cancel")]),e._v(" "),s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans b-0",attrs:{disabled:e.fileError,loading:e.loading,size:"mini",type:"primary"},on:{click:function(t){e.save("form")}}},[e._v("Save Job")])],1)]),e._v(" "),s("div",{staticClass:"p-20"},[s("el-form",{ref:"form",staticClass:"default-form",attrs:{size:"mini","label-position":"right",rules:e.rules,model:e.form,"label-width":"250px"}},[s("el-form-item",{attrs:{label:"Job name",prop:"description"}},[s("el-input",{staticClass:"w-25",model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Retry Limit"}},[s("el-input",{staticClass:"w-25",model:{value:e.form.retry_limit,callback:function(t){e.$set(e.form,"retry_limit",e._n(t))},expression:"form.retry_limit"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Mode"}},[s("el-select",{model:{value:e.form.scheduled,callback:function(t){e.$set(e.form,"scheduled",t)},expression:"form.scheduled"}},[s("el-option",{attrs:{label:"Automatic",value:!0}}),e._v(" "),s("el-option",{attrs:{label:"Manual",value:!1}})],1)],1),e._v(" "),e.form.scheduled?s("div",[s("el-form-item",{attrs:{label:"Frequency"}},[s("div",{staticClass:"flex align-items-center h-30"},[s("el-switch",{staticClass:"w-150",attrs:{"active-text":"Daily","active-value":"daily"},model:{value:e.form.schedule,callback:function(t){e.$set(e.form,"schedule",t)},expression:"form.schedule"}}),e._v(" "),s("el-switch",{staticClass:"w-150",attrs:{"active-text":"Weekly","active-value":"weekly"},model:{value:e.form.schedule,callback:function(t){e.$set(e.form,"schedule",t)},expression:"form.schedule"}}),e._v(" "),s("el-switch",{staticClass:"w-150",attrs:{"active-text":"Monthly","active-value":"monthly"},model:{value:e.form.schedule,callback:function(t){e.$set(e.form,"schedule",t)},expression:"form.schedule"}})],1),e._v(" "),s("div",{staticClass:"flex align-items-center h-30 mt-2"},[s("el-switch",{staticClass:"w-150",attrs:{"active-text":"BiMonthly","active-value":"bimonthly"},model:{value:e.form.schedule,callback:function(t){e.$set(e.form,"schedule",t)},expression:"form.schedule"}}),e._v(" "),s("el-switch",{staticClass:"w-150",attrs:{"active-text":"Quarterly","active-value":"quarterly"},model:{value:e.form.schedule,callback:function(t){e.$set(e.form,"schedule",t)},expression:"form.schedule"}}),e._v(" "),s("el-switch",{staticClass:"w-150",attrs:{"active-text":"Yearly","active-value":"yearly"},model:{value:e.form.schedule,callback:function(t){e.$set(e.form,"schedule",t)},expression:"form.schedule"}})],1)]),e._v(" "),s("transition",{attrs:{name:"el-fade-in"}},["daily"===e.form.schedule?s("el-form-item",{attrs:{label:"time of trasactions postings"}},[s("el-time-select",{attrs:{"picker-options":{start:"08:30",step:"00:15",end:"18:30"},placeholder:"Select time"},model:{value:e.schedule.time,callback:function(t){e.$set(e.schedule,"time",t)},expression:"schedule.time"}})],1):"weekly"===e.form.schedule?s("el-form-item",{attrs:{label:"date & time of trasactions postings"}},[s("el-select",{attrs:{placeholder:"select day"},model:{value:e.schedule.date,callback:function(t){e.$set(e.schedule,"date",t)},expression:"schedule.date"}},e._l(e.days,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),s("el-time-select",{attrs:{"picker-options":{start:"08:30",step:"00:15",end:"18:30"},placeholder:"Select time"},model:{value:e.schedule.time,callback:function(t){e.$set(e.schedule,"time",t)},expression:"schedule.time"}})],1):s("el-form-item",{attrs:{label:"date & time of trasactions postings"}},[s("el-date-picker",{attrs:{type:"date",placeholder:"Date","value-format":"yyyy-MM-dd",format:"MMM dd, yyyy","default-value":Date.now()},model:{value:e.schedule.date,callback:function(t){e.$set(e.schedule,"date",t)},expression:"schedule.date"}}),e._v(" "),s("el-time-select",{attrs:{"picker-options":{start:"08:30",step:"00:15",end:"18:30"},placeholder:"Select time"},model:{value:e.schedule.time,callback:function(t){e.$set(e.schedule,"time",t)},expression:"schedule.time"}})],1)],1)],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"Upload CSV"}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-change":e.onChange,"auto-upload":!1,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","file-list":e.form.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("Click to upload")])],1),e._v(" "),e.fileError?s("div",{staticClass:"mt-2"},[s("p",{staticClass:"p-0 m-0"},[e._v("Error in Uploading File")]),e._v(" "),s("el-button",{attrs:{type:"text",loading:e.fileUploading,icon:"sync icon"},on:{click:e.onChange}},[e._v("Retry")])],1):e._e()],1),e._v(" "),s("el-form-item",{attrs:{label:"Download File Format"}},[s("a",{attrs:{download:"",href:"../../../static/Batch_file_format.csv"}},[e._v("Download file format")])])],1),e._v(" "),s("div",{staticClass:"flex justify-content-end"},[s("p",{staticClass:"s-12"},[e._v("NB: Vodafone numbers not supported")])])],1)])],1)},staticRenderFns:[]};var u=s("VU/8")(n,d,!1,function(e){s("l8Gi")},"data-v-2ef9ca4a",null);t.default=u.exports}});
//# sourceMappingURL=10.5ba5985fe16ee6fa89a0.js.map