webpackJsonp([3],{"04Oc":function(e,t){},"2H6u":function(e,t){},"2kht":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),i=s("Usg1"),o=s("NYxO"),l=s("bOdI"),r=s.n(l),c=(s("Y+wi"),s("PJh5"),{name:"ExportModal",props:["modalVisible"],data:function(){return r()({checkAll:!1,form:{is_batch:!1,contacts:[]},characters:0,messages:0,message:"",fileList:[],loading:!1,column:"all",options:[{name:"Single",value:!1},{name:"File Upload",value:!0}],rules:{payment_types:[{required:!0,message:"Please select at least one option",trigger:"change"}]},inputVisible:!1,inputValue:""},"loading",!1)},watch:{message:function(){this.characters=this.message.length,this.messages=Math.ceil(this.characters/160)}},methods:{close:function(){i.a.$emit("logModal",!1)},onChange:function(e,t){this.files=t;var s=this.$el.querySelector(".upload-demo input[type='file']").files[0];this.$store.dispatch("sendToBucket",s)},handleClose:function(e){this.form.contacts.splice(this.form.contacts.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.form.contacts.push(e),this.inputVisible=!1,this.inputValue=""},createLog:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){if(e){var s={};t.form.is_batch?(t.form.file_url=t.file,s.file_url=t.file,s.is_batch=!0):(s.message=t.message,s.contacts=t.form.contacts,s.title=t.form.title,s.is_batch=!1),console.log("fonemessages",s),t.$store.dispatch("createLog",s).then(function(e){e.data.success?(t.$message({type:"success",message:"Message Sent"}),t.$store.dispatch("getFoneMessengers",{cache:!1}),t.$store.dispatch("getBalance"),t.close()):t.$message({type:"error",message:e.data.response.message}),t.loading=!1}).catch(function(e){t.loading=!1;e.response;t.$message({message:"Failed to send message. Please try again",type:"error"})})}else t.loading=!1,t.$message({message:"Please correct the errors",type:"error"})})}},computed:n()({},Object(o.b)({state:"fileState",file:"file"}),{fileUploading:function(){return"LOADING"===this.state}})}),u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"custom-class":"export-dialog",title:"New Message",visible:e.modalVisible,width:"35%"},on:{close:e.close}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fileUploading,expression:"fileUploading"}],staticClass:"flex justify-content-center new-export-bg"},[s("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{"hide-required-asterisk":"",size:"mini",rules:e.rules,model:e.form,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"Type Of Message"}},[s("el-select",{model:{value:e.form.is_batch,callback:function(t){e.$set(e.form,"is_batch",t)},expression:"form.is_batch"}},e._l(e.options,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),e.form.is_batch?s("div",[s("el-form-item",{attrs:{label:"Upload CSV File"}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-change":e.onChange,limit:1,"auto-upload":!1,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","file-list":e.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("Click to upload")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"Download File Format"}},[s("a",{attrs:{download:"",href:"../../../static/Batch_messages_format.csv"}},[e._v("Download file format")])])],1):s("div",[s("el-form-item",{attrs:{label:"Title Of Message"}},[s("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Phone Number(s)"}},[e._l(e.form.contacts,function(t){return s("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(s){e.handleClose(t)}}},[e._v("\n                        "+e._s(t)+"\n                        ")])}),e._v(" "),e.inputVisible?s("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm(t):null}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Number")])],2),e._v(" "),s("el-form-item",{attrs:{label:"Message"}},[s("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),s("p",{staticClass:"cha-info"},[e._v(e._s(e.characters)+" characters "+e._s(e.messages)+" messages")])],1)],1),e._v(" "),s("el-form-item",[s("div",{staticClass:"flex justify-content-end w-100"},[s("el-button",{attrs:{type:"text"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){e.createLog("form")}}},[e._v("Create")])],1)])],1)],1)])},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(e){s("WWty")},"data-v-997a396e",null).exports,p={name:"TopupAccount",props:["modalVisible"],data:function(){return{checkAll:!1,topupoption:"flopay",form:{currency:"ghs"},options:[{name:"Flopay Wallet",value:"flopay"},{name:"External Wallet",value:"external"}],rules:{amount:[{required:!0,message:"This field is required",trigger:"blur"}]},loading:!1}},methods:{close:function(){i.a.$emit("topupModal",!1)},createLog:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){if(e){var s="",a={};"flopay"===t.topupoption?(s="v1/ova/topup",a=t.form):(s="v1/ova/wallet/topup",a=n()({},t.form,{country_code:"GH",service_code:"cashout",live:!0})),t.$store.dispatch("topupOVA",{url:s,ova:a}).then(function(e){e.data.success?(t.$message({type:"success",message:e.data.response.message}),t.$store.dispatch("getBalance"),t.$store.dispatch("getFoneMessengers",{cache:!1}),t.close()):t.$message({type:"error",message:e.data.response.message}),t.loading=!1}).catch(function(e){t.loading=!1;var s=e.response;t.$message({message:s.data.error,type:"error"})})}else t.loading=!1,t.$message({message:"Please correct the errors",type:"error"})})}},computed:n()({},Object(o.b)({providers:"providers"}))},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"custom-class":"export-dialog",title:"Top-Up OVA",visible:e.modalVisible,width:"35%"},on:{close:e.close}},[s("div",{staticClass:"flex justify-content-center new-export-bg"},[s("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{"hide-required-asterisk":"",size:"mini",rules:e.rules,model:e.form,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"Topup Type"}},[s("el-select",{staticClass:"w-75",model:{value:e.topupoption,callback:function(t){e.topupoption=t},expression:"topupoption"}},e._l(e.options,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"Amount",prop:"amount"}},[s("el-input",{staticClass:"w-75",model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}},[s("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("GHs")])])],1),e._v(" "),"external"===e.topupoption?s("div",[s("el-form-item",{attrs:{label:"Provider"}},[s("el-select",{staticClass:"w-75",model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}},e._l(e.providers,function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"Phone",prop:"phone"}},[s("el-input",{staticClass:" w-75",model:{value:e.form.customer_no,callback:function(t){e.$set(e.form,"customer_no",t)},expression:"form.customer_no"}})],1),e._v(" "),"vodafone"===e.form.provider?s("el-form-item",{attrs:{label:"Voucher"}},[s("el-input",{staticClass:" w-75",model:{value:e.form.voucher,callback:function(t){e.$set(e.form,"voucher",t)},expression:"form.voucher"}})],1):e._e()],1):e._e(),e._v(" "),s("el-form-item",[s("div",{staticClass:"flex justify-content-end w-100"},[s("el-button",{attrs:{type:"text"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){e.createLog("form")}}},[e._v("Create")])],1)])],1)],1)])},staticRenderFns:[]};var f={name:"FoneMessenger",components:{LogDialog:d,TopupAccount:s("VU/8")(p,m,!1,function(e){s("ZxV3")},"data-v-9d880af8",null).exports},data:function(){return{test:!0,columns:[{label:"message id",dataField:"response_id",align:"center"},{label:"delivery status",dataField:"response_message",align:"left"},{label:"recipient",dataField:"recipient_no",align:"left"}],logDialog:!1,topupDialog:!1,styleObject:{fontSize:"12px"}}},created:function(){this.$store.dispatch("getFoneMessengers")},mounted:function(){var e=this;i.a.$emit("sideNavClick","fonemessenger"),i.a.$on("logModal",function(){e.logDialog=!1}),i.a.$on("topupModal",function(){e.topupDialog=!1})},beforeDestroy:function(){var e=this;i.a.$off("logModal",function(){e.logDialog=!1})},methods:{handleCurrentChange:function(e){this.$store.dispatch("getFoneMessengers",{page:e,cache:!1})},clickRow:function(e,t,s){this.$refs.fone.toggleRowExpansion(e)},fetchMessages:function(){this.$store.dispatch("getFoneMessengers")},topUpAccount:function(){},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$store.dispatch("createTransactions",t.form).then(function(e){t.$message({message:"Payment successful",type:"success"})})})},resetForm:function(e){this.$refs[e].resetFields()}},computed:n()({},Object(o.b)({messages:"messages",state:"messagesState",total:"messagesCount",providers:"providers",pageSize:"pageSize",balance:"balance"}),{error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},loading:function(){return"LOADING"===this.state}})},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"card-0"},[s("div",{staticClass:"transactions"},[s("div",{staticClass:"trans-div flex justify-content-between"},[s("div",{staticClass:"flex align-items-baseline"},[s("p",{staticClass:"blue-text bold-600 s-16 m-0 p-0"},[e._v("Fone Messenger")])]),e._v(" "),s("div",{staticClass:"flex align-items-center"},[s("p",{staticClass:"balance-info gray-text border-right"},[e._v(e._s(e._f("money")(e.balance.fon_messanger_balance)))]),e._v(" "),s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(t){e.topupDialog=!0}}},[s("i",{staticClass:"plus icon"}),e._v(" Topup")]),e._v(" "),s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(t){e.logDialog=!0}}},[s("i",{staticClass:"plus icon"}),e._v(" New")])],1)]),e._v(" "),s("div",[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchMessages(t)}}},[e._v("Retry")])],1)]):s("div",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"fone",attrs:{"empty-text":"No fone messengers to display","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.messages},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{type:"expand",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"pl-15"},[s("p",{staticClass:"blue-text s-13 bold-600"},[e._v("Message: ")]),e._v(" "),s("p",{staticClass:"s-12 gray"},[e._v(e._s(t.row.message))])])]}}])}),e._v(" "),e._l(e.columns,function(e,t){return s("el-table-column",{key:t,attrs:{"show-overflow-tooltip":"",prop:e.dataField,label:e.label}})}),e._v(" "),s("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},[s("the-tag",{attrs:{status:"failed",title:e.row.post_type}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"updated_at",label:"Date",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(e._f("moment")(t.row.updated_at,"D MMM,YY hh:mm A"))+"\n                        ")]}}])})],2),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-10"},[s("div",{staticClass:"s-12"},[e._v("\n                        "+e._s(e.messages.length)+" results\n                    ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])]),e._v(" "),s("log-dialog",{attrs:{modalVisible:e.logDialog}}),e._v(" "),s("topup-account",{attrs:{modalVisible:e.topupDialog}})],1)},staticRenderFns:[]};var g=s("VU/8")(f,v,!1,function(e){s("04Oc")},"data-v-a35e8808",null);t.default=g.exports},"3qhX":function(e,t){},Lcjq:function(e,t){},N0mj:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("Usg1"),s("NYxO");var a={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var n=s("VU/8")({name:"FeesDetails",data:function(){return{}},created:function(){},mounted:function(){},methods:{},computed:{}},a,!1,function(e){s("Lcjq")},"data-v-55eed1d8",null);t.default=n.exports},QyJc:function(e,t){},VCvx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),i=s("Usg1"),o=s("NYxO"),l={name:"Fees",data:function(){return{test:!0,columns:[{label:"Net",dataField:"type"},{label:"Amount",dataField:"customer"},{label:"Fee",dataField:"ref"}],styleObject:{fontSize:"12px"},exportVisible:!1}},created:function(){this.$store.dispatch("getFees")},mounted:function(){var e=this;i.a.$emit("sideNavClick","fees"),i.a.$on("exportModal",function(t){e.exportVisible=!1})},methods:{clickRow:function(e,t,s){s.property&&this.$router.push("/payments/"+e.reference)},handleCurrentChange:function(e){this.$store.dispatch("getFees",{page:e,cache:!1})},fetchFees:function(){this.$store.dispatch("getFees",{cache:!1})}},computed:n()({},Object(o.b)({fees:"fees",meta:"feesMeta",state:"feesState",pageSize:"pageSize"}),{error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},total:function(){return this.meta.trans},loading:function(){return"LOADING"===this.state},filteredFees:function(){return this.fees.map(function(e){return e.net_amount=e.receiver_amount-e.charged_amount,e})}})},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"card-0"},[s("div",{staticClass:"transactions"},[s("div",{staticClass:"trans-div flex justify-content-between"},[s("div",[s("filter-component",{attrs:{dispatch:"setFeesFilters",filterType:"payment"}})],1),e._v(" "),s("div",[s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(t){e.exportVisible=!0}}},[s("i",{staticClass:"file alternate outline icon"}),e._v(" Export")])],1)]),e._v(" "),s("div",[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchFees(t)}}},[e._v("Retry")])],1)]):s("div",{staticClass:"breathe"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"empty-text":"No match found, filter desired period range","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.filteredFees},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{prop:"type",label:"Type"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v("Fee")])]}}])}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"reference",label:"Reference"}}),e._v(" "),s("el-table-column",{attrs:{label:"Net"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 s-13"},[e._v(e._s(e._f("money")(t.row.net_amount)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 s-13"},[e._v(e._s(e._f("money")(t.row.receiver_amount)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Fee"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 s-13"},[e._v(e._s(e._f("money")(t.row.charged_amount)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                        ")]}}])})],1),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-10"},[s("div",{staticClass:"s-12"},[s("span",{staticClass:"bold-600"},[e._v(e._s(e.fees.length))]),e._v(" results\n                    ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),s("export-modal",{attrs:{modalVisible:e.exportVisible},on:{"update:modalVisible":function(t){e.exportVisible=t}}})],1)])},staticRenderFns:[]};var c=s("VU/8")(l,r,!1,function(e){s("Wiys")},"data-v-4395759e",null);t.default=c.exports},WWty:function(e,t){},"WY9/":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"center flex-column full-height"},[e._m(0),e._v(" "),s("div",{staticClass:"logo-div w-30 bg-white border-rounded"},[s("p",{staticClass:"text-center flopay-blue bold-500 s-16"},[e._v("Welcome. Please change your password")]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.login("form")}}},[s("el-form-item",{attrs:{prop:"email"}},[s("el-input",{staticClass:"no-border-input",attrs:{placeholder:"Email",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"current_password"}},[s("el-input",{staticClass:"no-border-input",attrs:{placeholder:"Current Password",type:e.current_type},model:{value:e.form.current_password,callback:function(t){e.$set(e.form,"current_password",t)},expression:"form.current_password"}},[s("i",{staticClass:"el-input__icon eye icon",attrs:{slot:"suffix"},on:{click:e.showCurrentPassword},slot:"suffix"})])],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{staticClass:"no-border-input",attrs:{placeholder:"New Password",type:e.type},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[s("i",{staticClass:"el-input__icon eye icon",attrs:{slot:"suffix"},on:{click:e.showPassword},slot:"suffix"})])],1),e._v(" "),s("el-form-item",{staticClass:"my-2"},[s("el-button",{staticClass:"w-100",attrs:{loading:e.loading,type:"warning"},on:{click:function(t){e.changePassword("form")}}},[e._v("Change Password")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"my-3 flex justify-content-center"},[t("img",{attrs:{src:s("AOy5"),alt:""}})])}]};var n=s("VU/8")({name:"FirstTimeLogin",data:function(){return{form:{email:"",current_password:"",password:""},loading:!1,type:"password",current_type:"password",rules:{email:[{required:!0,message:"Please input email",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"}],current_password:[{required:!0,message:"Please input password",trigger:"blur"}]}}},mounted:function(){},methods:{changePassword:function(e){var t=this;this.$route.query.token&&(this.form.token=this.$route.query.token),this.loading=!0,this.$refs[e].validate(function(e){e?t.$store.dispatch("resetPassword",t.form).then(function(e){e.data.success?(t.$message({message:e.data.response.message,type:"success"}),t.$session.has("client")?t.$store.dispatch("getToken").then(function(e){t.$session.set("token",e.data.access_token),t.$store.dispatch("setToken",e.data.access_token),t.$router.push("/")}):(t.$message({message:"Password reset successful, login with your new credentials",type:"success"}),t.$router.push("/login"))):t.$message({message:e.data.response.message,type:"error"}),t.loading=!1}).catch(function(e){t.loading=!1,t.$message({message:"Error. Please try again later",type:"error"})}):(t.loading=!1,t.$message({message:"Please fill out all the details",type:"error"}))})},showCurrentPassword:function(){this.current_type="password"===this.current_type?"text":"password"},showPassword:function(){this.type="password"===this.type?"text":"password"}}},a,!1,function(e){s("2H6u")},"data-v-e0099206",null);t.default=n.exports},Wiys:function(e,t){},ZxV3:function(e,t){},d99H:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),i=s("NYxO"),o=s("PJh5"),l=s.n(o),r=(s("i+v2"),{name:"Profile",data:function(){return{imageUrl:"",fileList:[],columns:[{label:"Client Name",type:"input",model:"full_name",subtext:"Enter your client name."},{label:"Client Till",type:"input",model:"code",editable:!0},{label:"Client Company",type:"input",model:"company_name",subtext:"Enter your company's name."},{label:"Phone Number",type:"input",model:"msisdn"},{label:"Email",type:"input",model:"email",subtext:"We also use email for avatar detection if no photo is uploaded."},{label:"Account Number (Optional)",type:"input",model:"bank_account_no"},{label:"Business Address",type:"input",model:"address"},{label:"City",type:"input",model:"city"}],styleObject:{fontSize:"12px"},tableColumns:[{label:"name",prop:"name",align:"left"},{label:"account entry",prop:"account_entry",align:"left"},{label:"amount",prop:"money",align:"left"},{label:"limit",prop:"nlimit",align:"left"},{label:"date",prop:"date",align:"center"}],depositColumns:[{label:"name",prop:"name"},{label:"desciption",prop:"description"}],form:{},createLoading:!1,page:1}},computed:n()({},Object(i.b)(["user","permissions","pageSize"]),{services:function(){return this.user.account_services.map(function(e){return e.date=l()(e.created_at).format("D MMM,YY hh:mm A"),e.money="GHs "+e.amount,e.nlimit="GHs "+e.limit,e})},privileges:function(){return this.permissions},deposit:function(){return this.user.deposit_accounts}}),methods:{updateProfile:function(e){var t=this;this.form={country_code:"GH",name:this.user.client.full_name,company:this.user.client.company_name,client_msisdn:this.user.client.msisdn,email:this.user.client.email,city:this.user.client.city},this.createLoading=!0,this.$refs[e].validate(function(e){e?t.$store.dispatch("updateProfile",t.form).then(function(e){t.createLoading=!1,t.$message({message:"Profile Updated Successfully",type:"success"})}).catch(function(){t.createLoading=!1,t.$message({message:"Unable to update profile. Please try again later",type:"error"})}):(t.createLoading=!1,t.$message({message:"Please fill form correctly",type:"error"}))})},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},logout:function(){var e=this;this.$store.dispatch("logout").then(function(){e.$session.remove("client"),e.$session.remove("token"),e.$session.destroy(),e.$router.push("/login")})},handleCurrentChange:function(e){this.page=e},handlePictureCardPreview:function(e){this.imageUrl=e.url}}}),c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"my-2 card-0 custom"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Profile")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{type:"primary",size:"mini"},on:{click:e.logout}},[e._v("Sign Out")])],1),e._v(" "),s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{sm:16,lg:13}},[s("el-form",{ref:"form",staticClass:"transaction-form py-20",attrs:{"label-position":"left",size:"mini","hide-required-asterisk":"",model:e.user.client,"label-width":"200px"}},e._l(e.columns,function(t,a){return s("el-form-item",{key:a,attrs:{label:t.label}},["input"===t.type?s("el-input",{attrs:{disabled:t.editable},model:{value:e.user.client[t.model],callback:function(s){e.$set(e.user.client,t.model,s)},expression:"user.client[item.model]"}}):e._e(),e._v(" "),t.subtext?s("p",{staticClass:"my-1"},[s("span",{staticClass:"info s-12 pl-6"},[e._v(e._s(t.subtext))])]):e._e()],1)}),1)],1)],1)],1),e._v(" "),s("div",{staticClass:"el-card__footer flex justify-content-end"},[s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{size:"mini"}},[e._v("Cancel")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 b-0 bold-500 open-sans white-text",attrs:{size:"mini",loading:e.createLoading,type:"primary"},on:{click:function(t){e.updateProfile("form")}}},[e._v("Update Client Profile")])],1)]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Deposit Accounts")])]),e._v(" "),s("div",[s("el-table",{staticClass:"breathe",attrs:{data:e.deposit,"empty-text":"No services to display","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header"}},[e._l(e.depositColumns,function(e,t){return s("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),e._v(" "),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{placement:"left",width:"400","popper-class":"no-padding-popover",trigger:"hover"}},[s("div",[s("div",{staticClass:"flex justify-content-between p-10 border-bottom"},[s("p",{staticClass:"blue-text bold-600 s-14 m-0 p-0"},[e._v("Accounts")]),e._v(" "),s("the-tag",{attrs:{status:"failed",title:t.row.name,icon:"reply icon"}})],1),e._v(" "),s("div",{staticClass:"p-10"},[s("el-row",[s("el-col",{attrs:{span:12}},e._l(t.row.accounts.slice(0,t.row.accounts.length/2+1),function(t,a){return s("div",{key:a},[s("p",{staticClass:"s-12 py-5"},[e._v(e._s(t.name))])])})),e._v(" "),s("el-col",{attrs:{span:12}},e._l(t.row.accounts.slice(t.row.accounts.length/2+1,t.row.accounts.length),function(t,a){return s("div",{key:a},[s("p",{staticClass:"s-12 py-5"},[e._v(e._s(t.name))])])}))],1)],1)]),e._v(" "),s("el-button",{staticClass:"icon-only-button",attrs:{slot:"reference",icon:"info circle icon",type:"text"},slot:"reference"})],1)]}}])})],2),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-20"},[s("div",{staticClass:"s-12"},[e._v("\n                    "+e._s(e.deposit.length)+" results\n                ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.deposit.length},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),s("el-card",{staticClass:"my-2"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Privileges")])]),e._v(" "),s("div",[s("div",{staticClass:"flex"},[s("div",{staticClass:"w-50"},e._l(e.privileges.slice(0,e.privileges.length/2+1),function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1",attrs:{type:"flex",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-13"},[e._v(e._s(t.action))])]),e._v(" "),s("el-col",{attrs:{span:12}})],1)}),1),e._v(" "),s("div",{staticClass:"w-50"},e._l(e.privileges.slice(e.privileges.length/2+1,e.privileges.length),function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1",attrs:{type:"flex",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-12"},[e._v(e._s(t.action))])]),e._v(" "),s("el-col",{attrs:{span:12}})],1)}),1)])])]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Account Services")])]),e._v(" "),s("div",[s("el-table",{staticClass:"breathe",attrs:{data:e.services,"empty-text":"No services to display","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header"}},e._l(e.tableColumns,function(e,t){return s("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),1),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-20"},[s("div",{staticClass:"s-12"},[e._v("\n                    "+e._s(e.services.length)+" results\n                ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.services.length},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[]};var u=s("VU/8")(r,c,!1,function(e){s("vMUN")},null,null).exports,d={name:"AdminProfile",data:function(){return{columns:[{label:"Client Name",prop:"name"},{label:"Company Name",prop:"company"},{label:"Username",prop:"username"}]}},computed:n()({},Object(i.b)(["user"]),{form:{get:function(){return n()({},this.user,{name:this.user.firstname+" "+this.user.lastname})},set:function(e){this.user=e;e.name.split(" ");this.user.firstname=e[0],this.user.lastname=e[1]}}})},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"my-2 card-0 custom"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Profile")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{type:"primary",size:"mini"}},[e._v("Sign Out")])],1),e._v(" "),s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{sm:16,lg:13}},[s("el-form",{ref:"form",staticClass:"transaction-form py-20",attrs:{"label-position":"left",size:"mini","hide-required-asterisk":"",model:e.client,"label-width":"200px"}},e._l(e.columns,function(t,a){return s("el-form-item",{key:a,attrs:{label:t.label}},[s("el-input",{model:{value:e.form[t.prop],callback:function(s){e.$set(e.form,t.prop,s)},expression:"form[item.prop]"}})],1)}),1)],1)],1)],1),e._v(" "),s("div",{staticClass:"el-card__footer flex justify-content-end"},[s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{size:"mini"}},[e._v("Cancel")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 b-0 bold-500 open-sans white-text",attrs:{size:"mini",type:"primary"}},[e._v("Save")])],1)])],1)},staticRenderFns:[]};var m={name:"Profile",components:{ClientProfile:u,AdminProfile:s("VU/8")(d,p,!1,function(e){s("QyJc")},null,null).exports},computed:n()({},Object(i.b)(["isAdmin"]))},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.isAdmin?t("div",[t("admin-profile")],1):t("div",[t("client-profile")],1)])},staticRenderFns:[]};var v=s("VU/8")(m,f,!1,function(e){s("nn8h")},null,null);t.default=v.exports},gZcy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("NYxO");var a={name:"Login",data:function(){return{form:{email:""},email:"",loading:!1,rules:{email:[{required:!0,message:"Please input email",trigger:"blur"}]}}},methods:{sendEmail:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){e?t.$store.dispatch("sendEmail",t.form.email).then(function(e){e.data.success?(t.$message({message:e.data.response.message,type:"success"}),setTimeout(function(){t.$router.push("/login")},2e3)):t.$message({message:e.data.response.message,type:"error"}),t.loading=!1}).catch(function(e){t.loading=!1,t.$message({message:"Error. Please try again later",type:"error"})}):(t.loading=!1,t.$message({message:"Please fill out all the details",type:"error"}))})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"center flex-column full-height"},[e._m(0),e._v(" "),s("div",{staticClass:"logo-div w-30 bg-white border-rounded"},[s("p",{staticClass:"text-center flopay-blue bold-500 s-16 m-0"},[e._v("Reset your password")]),e._v(" "),s("p",{staticClass:"text-center gray-text bold-500 s-13 my-1"},[e._v("Enter your email address and we will send you a link to reset your password.")]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.login("form")}}},[s("el-form-item",{attrs:{prop:"email"}},[s("el-input",{staticClass:"no-border-input",attrs:{placeholder:"Enter your email address",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("el-form-item",{staticClass:"my-2"},[s("el-button",{staticClass:"w-100",attrs:{loading:e.loading,type:"warning"},on:{click:function(t){e.sendEmail("form")}}},[e._v("Send password to reset email")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"my-3 flex justify-content-center"},[t("img",{attrs:{src:s("AOy5"),alt:""}})])}]};var i=s("VU/8")(a,n,!1,function(e){s("3qhX")},"data-v-77e76d86",null);t.default=i.exports},nn8h:function(e,t){},vMUN:function(e,t){}});
//# sourceMappingURL=3.7a13e5cf5bdbbebe09f0.js.map