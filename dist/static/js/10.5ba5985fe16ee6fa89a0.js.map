{"version":3,"sources":["webpack:///src/transactions/pages/NewJob.vue","webpack:///./src/transactions/pages/NewJob.vue?4792","webpack:///./src/transactions/pages/NewJob.vue"],"names":["NewJob","__webpack_require__","name","data","isTest","form","scheduled","schedule","timezone","country_code","live","this","testData","test","service_code","beneficiaries","contactData","loading","response","files","days","rules","description","required","message","trigger","min","amount","created","$store","dispatch","computed","extends_default","Object","vuex_esm","contacts","file","state","fileUploading","fileError","methods","cancel","$router","push","save","formName","_this","$refs","validate","valid","upload_details","Bucket","transactions_store_constants","Key","key","batch_details","dummy","services","createJobQuery","then","success","$message","type","cache","event_bus","$emit","catch","error","onChange","fileList","filess","$el","querySelector","mounted","pages_NewJob","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","class","test-data","attrs","element-loading-text","staticClass","slot","_v","size","on","click","disabled","$event","ref","label-position","model","label-width","label","prop","callback","$$v","$set","_n","active-text","active-value","picker-options","start","step","end","placeholder","_l","item","index","value-format","format","default-value","Date","now","_e","action","on-change","auto-upload","accept","file-list","icon","download","href","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.5ba5985fe16ee6fa89a0.js","sourcesContent":["<template>\r\n    <div>\r\n        <el-card v-loading=\"fileUploading\" element-loading-text=\"Uploading file...\" :class=\"[{'test-data': isTest}, 'flex', 'flex-column', 'card-0', 'position-relative']\">\r\n            <div slot=\"header\" class=\"flex justify-content-between align-items-center\">\r\n                <h3 class=\"blue-text bold-500 m-0 pb-5\">Create a Job</h3>\r\n                <div class=\"standard-button\">\r\n                    <el-button @click=\"cancel\" class=\"z-depth-button bold-600 s-13 open-sans b-0\" size=\"mini\">Cancel</el-button>\r\n                    <el-button :disabled=\"fileError\" @click=\"save('form')\" :loading=\"loading\" class=\"z-depth-button bold-600 s-13 open-sans b-0\" size=\"mini\" type=\"primary\">Save Job</el-button>\r\n                </div>\r\n            </div>\r\n            <div class=\"p-20\">\r\n                <!-- JOB FORM -->\r\n                <el-form size=\"mini\" class=\"default-form\" label-position=\"right\" :rules=\"rules\" ref=\"form\" :model=\"form\" label-width=\"250px\">\r\n                    <!-- NAME -->\r\n                    <el-form-item label=\"Job name\" prop=\"description\">\r\n                        <el-input class=\"w-25\" v-model=\"form.description\"></el-input>\r\n                    </el-form-item>\r\n                    <!-- JOB DESCRIPTION -->\r\n                    <!-- <el-form-item label=\"Job description\">\r\n                        <el-input class=\"w-25\" type=\"textarea\" v-model=\"form.description\"></el-input>\r\n                    </el-form-item> -->\r\n                    <!-- JOB AMOUNT -->\r\n                    <!-- <el-form-item label=\"Amount\" prop=\"amount\">\r\n                        <el-input class=\"w-25\" v-model=\"form.amount\">\r\n                            <span slot=\"prefix\">&#8373</span>\r\n                        </el-input>\r\n                    </el-form-item> -->\r\n                    <!-- JOB LIMIT -->\r\n                    <el-form-item label=\"Retry Limit\">\r\n                        <el-input class=\"w-25\" v-model.number=\"form.retry_limit\"></el-input>\r\n                    </el-form-item>\r\n                    <!-- JOB MODE -->\r\n                    <el-form-item label=\"Mode\">\r\n                        <el-select v-model=\"form.scheduled\">\r\n                            <el-option label=\"Automatic\" :value=\"true\"></el-option>\r\n                            <el-option label=\"Manual\" :value=\"false\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <!-- JOB AUTOMATIC SCHEDULED -->\r\n                    <div v-if=\"form.scheduled\">\r\n                        <el-form-item label=\"Frequency\">\r\n                            <div class=\"flex align-items-center h-30\">\r\n                                <el-switch class=\"w-150\" active-text=\"Daily\" v-model=\"form.schedule\" active-value=\"daily\"></el-switch>\r\n                                <el-switch class=\"w-150\" active-text=\"Weekly\" v-model=\"form.schedule\" active-value=\"weekly\"></el-switch>\r\n                                <el-switch class=\"w-150\" active-text=\"Monthly\" v-model=\"form.schedule\" active-value=\"monthly\"></el-switch>\r\n                            </div>\r\n                            <div class=\"flex align-items-center h-30 mt-2\">\r\n                                <el-switch class=\"w-150\" active-text=\"BiMonthly\" v-model=\"form.schedule\" active-value=\"bimonthly\"></el-switch>\r\n                                <el-switch class=\"w-150\" active-text=\"Quarterly\" v-model=\"form.schedule\" active-value=\"quarterly\"></el-switch>\r\n                                <el-switch class=\"w-150\" active-text=\"Yearly\" v-model=\"form.schedule\" active-value=\"yearly\"></el-switch>\r\n                            </div>\r\n                        </el-form-item>\r\n                        <!-- SWITCH FOR SCHEDULE -->\r\n                        <transition name=\"el-fade-in\">\r\n                            <el-form-item v-if=\"form.schedule === 'daily'\" label=\"time of trasactions postings\">\r\n                                <el-time-select\r\n                                v-model=\"schedule.time\"\r\n                                :picker-options=\"{\r\n                                    start: '08:30',\r\n                                    step: '00:15',\r\n                                    end: '18:30'\r\n                                }\"\r\n                                placeholder=\"Select time\">\r\n                                </el-time-select>\r\n                            </el-form-item>\r\n                            <el-form-item v-else-if=\"form.schedule === 'weekly'\" label=\"date & time of trasactions postings\">\r\n                                <el-select placeholder=\"select day\" v-model=\"schedule.date\">\r\n                                    <el-option v-for=\"(item, index) in days\" :key=\"index\" :label=\"item\" :value=\"item\"></el-option>\r\n                                </el-select>\r\n                                <el-time-select\r\n                                v-model=\"schedule.time\"\r\n                                :picker-options=\"{\r\n                                    start: '08:30',\r\n                                    step: '00:15',\r\n                                    end: '18:30'\r\n                                }\"\r\n                                placeholder=\"Select time\">\r\n                                </el-time-select>\r\n                            </el-form-item>\r\n                            <el-form-item v-else label=\"date & time of trasactions postings\">\r\n                                <!-- <el-input placeholder=\"input \" class=\"w-25\" v-model=\"schedule.date\"></el-input> -->\r\n                                <el-date-picker\r\n                                    type=\"date\"\r\n                                    placeholder=\"Date\"\r\n                                    value-format=\"yyyy-MM-dd\"\r\n                                    format=\"MMM dd, yyyy\"\r\n                                    v-model=\"schedule.date\" \r\n                                    :default-value=\"Date.now()\"></el-date-picker>\r\n                                <el-time-select\r\n                                v-model=\"schedule.time\"\r\n                                :picker-options=\"{\r\n                                    start: '08:30',\r\n                                    step: '00:15',\r\n                                    end: '18:30'\r\n                                }\"\r\n                                placeholder=\"Select time\">\r\n                                </el-time-select>\r\n                            </el-form-item>\r\n                        </transition>\r\n                    </div>\r\n                    <!-- <el-form-item label=\"Beneficiaries\">\r\n                        <el-select v-model=\"beneficiaries\">\r\n                            <el-option label=\"Upload CSV\" value=\"upload\"></el-option>\r\n                            <el-option label=\"Select Contacts\" value=\"select\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item> -->\r\n                    <!-- <div v-if=\"beneficiaries === 'upload'\"> -->\r\n                        <el-form-item label=\"Upload CSV\">\r\n                            <el-upload\r\n                                class=\"upload-demo\"\r\n                                action=\"\"\r\n                                :on-change=\"onChange\"\r\n                                :auto-upload=\"false\"\r\n                                accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\r\n                                :file-list=\"form.fileList\">\r\n                                <el-button size=\"small\" type=\"primary\">Click to upload</el-button>\r\n                            </el-upload>\r\n                            <div v-if=\"fileError\" class=\"mt-2\">\r\n                                <p class=\"p-0 m-0\">Error in Uploading File</p>\r\n                                <el-button type=\"text\" :loading=\"fileUploading\" icon=\"sync icon\" @click=\"onChange\">Retry</el-button>\r\n                            </div>\r\n                        </el-form-item>\r\n                    <!-- </div> -->\r\n                    <!-- <div v-else>\r\n                        <el-form-item label=\"add contacts\">\r\n                            <el-select\r\n                                v-model=\"contactData\"\r\n                                multiple\r\n                                collapse-tags>\r\n                                <el-option\r\n                                v-for=\"item in contacts\"\r\n                                :key=\"item.id\"\r\n                                :label=\"item.name\"\r\n                                :value=\"item.name\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </el-form-item>\r\n                    </div> -->\r\n                    <el-form-item label=\"Download File Format\">\r\n                        <a download href=\"../../../static/Batch_file_format.csv\">Download file format</a>\r\n                        <!-- <el-switch\r\n                        v-model=\"form.approval\"\r\n                        active-text=\"Require Approval\"\r\n                        inactive-text=\"Deny Approval\">\r\n                        </el-switch> -->\r\n                    </el-form-item>\r\n                </el-form>\r\n                <div class=\"flex justify-content-end\">\r\n                    <p class=\"s-12\">NB: Vodafone numbers not supported</p>\r\n                </div>\r\n            </div>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport EventBus from '../../event-bus.js'\r\nimport { mapGetters } from 'vuex'\r\nvar S3 = require('aws-sdk/clients/s3')\r\nimport { AWS_BUCKET } from '../store/transactions-store-constants.js'\r\nimport Utils from '../../utils/services'\r\n\r\nexport default {\r\n    name: 'NewJob',\r\n    data () {\r\n        return {\r\n            isTest: true,\r\n            form: {\r\n                name: '',\r\n                scheduled: true,\r\n                schedule: \"daily\",\r\n                // beneficiaries: 'upload',\r\n                // times: [],\r\n                // contacts: [],\r\n                timezone: \"Africa/Accra\",\r\n                country_code: \"GH\",\r\n                live: !this.testData,\r\n                test: this.testData,\r\n                service_code: 'cashin'\r\n            },\r\n            beneficiaries: 'upload',\r\n            contactData: [],\r\n            schedule: {},\r\n            loading: false,\r\n            response: {},\r\n            files: [],\r\n            days: ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'],\r\n            rules: {\r\n                description: [\r\n                    { required: true, message: 'This field is required', trigger: 'blur' },\r\n                    { min: 3, message: 'Length should be at least 3 letters', trigger: 'blur' },\r\n                ],\r\n                amount: [\r\n                    { required: true, message: 'This field is required', trigger: 'blur' }\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    created () {\r\n        this.$store.dispatch('getContacts')\r\n    },\r\n    computed: {\r\n        ...mapGetters({\r\n            contacts: 'contacts',\r\n            file: 'file',\r\n            test: 'test',\r\n            state: 'fileState'\r\n        }),\r\n        testData () {\r\n            return this.test\r\n        },\r\n        fileUploading () {\r\n            return this.state === 'LOADING'\r\n        },\r\n        fileError () {\r\n            return this.state === 'ERROR'\r\n        }\r\n    },\r\n    methods: {\r\n        cancel () {\r\n            this.$router.push('/payments')\r\n        },\r\n        save (formName) {\r\n            this.loading = true\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    var job = ''\r\n                    // if (this.beneficiaries === 'upload') {\r\n                    job = 'createJob'\r\n                    this.form.upload_details = {\r\n                        Bucket: AWS_BUCKET,\r\n                        Key: this.file.key\r\n                    }\r\n                    this.form.batch_details = {\r\n                        Bucket: AWS_BUCKET,\r\n                        Key: this.file.key\r\n                    }\r\n                    // } else {\r\n                    //     job = 'createJobContact'\r\n                    //     this.form.contacts = this.contactData\r\n                    //     this.form.is_sub_user = false\r\n                    // }\r\n                    this.form.test = this.test\r\n                    this.form.dummy = this.test\r\n                    this.form.live = !this.test\r\n                    var schedule = Utils.createJobQuery (this.form.schedule, this.schedule)\r\n                    this.form.schedule = schedule\r\n\r\n                    this.$store.dispatch(job, this.form)\r\n                    .then((response) => {\r\n                        if (response.data.success) {\r\n                            this.$message({\r\n                                type: 'success',\r\n                                message: 'Job created',\r\n                            })\r\n                            this.$store.dispatch('getJobs', {cache: false})\r\n                            EventBus.$emit('tabNumber', '3')\r\n                            this.$router.push('/payments')\r\n                        } else {\r\n                            this.$message({\r\n                                type: 'error',\r\n                                message: response.data.response.message\r\n                            })\r\n                        }\r\n                        this.loading = false\r\n                    }).catch((error) => {\r\n                        this.loading = false\r\n                        const response = error.response\r\n                        this.$message({\r\n                            message: response.data.error,\r\n                            type: 'error'\r\n                        })\r\n                    })\r\n                } else {\r\n                    this.loading = false\r\n                    this.$message({\r\n                        message: 'Please correct the errors',\r\n                        type: 'error'\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        onChange (file, fileList) {\r\n            this.files = fileList\r\n            let fileInput = this.$el.querySelector(\".upload-demo input[type='file']\")\r\n            let filess = fileInput.files[0]\r\n            this.$store.dispatch('sendToBucket', filess)\r\n        }\r\n    },\r\n    mounted () {\r\n        EventBus.$emit('sideNavClick', 'payments')\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.w-150{\r\n    width: 150px;\r\n}\r\n.mt-2{\r\n    margin-top: 1rem;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/transactions/pages/NewJob.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.fileUploading),expression:\"fileUploading\"}],class:[{'test-data': _vm.isTest}, 'flex', 'flex-column', 'card-0', 'position-relative'],attrs:{\"element-loading-text\":\"Uploading file...\"}},[_c('div',{staticClass:\"flex justify-content-between align-items-center\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('h3',{staticClass:\"blue-text bold-500 m-0 pb-5\"},[_vm._v(\"Create a Job\")]),_vm._v(\" \"),_c('div',{staticClass:\"standard-button\"},[_c('el-button',{staticClass:\"z-depth-button bold-600 s-13 open-sans b-0\",attrs:{\"size\":\"mini\"},on:{\"click\":_vm.cancel}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"z-depth-button bold-600 s-13 open-sans b-0\",attrs:{\"disabled\":_vm.fileError,\"loading\":_vm.loading,\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.save('form')}}},[_vm._v(\"Save Job\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"p-20\"},[_c('el-form',{ref:\"form\",staticClass:\"default-form\",attrs:{\"size\":\"mini\",\"label-position\":\"right\",\"rules\":_vm.rules,\"model\":_vm.form,\"label-width\":\"250px\"}},[_c('el-form-item',{attrs:{\"label\":\"Job name\",\"prop\":\"description\"}},[_c('el-input',{staticClass:\"w-25\",model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Retry Limit\"}},[_c('el-input',{staticClass:\"w-25\",model:{value:(_vm.form.retry_limit),callback:function ($$v) {_vm.$set(_vm.form, \"retry_limit\", _vm._n($$v))},expression:\"form.retry_limit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Mode\"}},[_c('el-select',{model:{value:(_vm.form.scheduled),callback:function ($$v) {_vm.$set(_vm.form, \"scheduled\", $$v)},expression:\"form.scheduled\"}},[_c('el-option',{attrs:{\"label\":\"Automatic\",\"value\":true}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Manual\",\"value\":false}})],1)],1),_vm._v(\" \"),(_vm.form.scheduled)?_c('div',[_c('el-form-item',{attrs:{\"label\":\"Frequency\"}},[_c('div',{staticClass:\"flex align-items-center h-30\"},[_c('el-switch',{staticClass:\"w-150\",attrs:{\"active-text\":\"Daily\",\"active-value\":\"daily\"},model:{value:(_vm.form.schedule),callback:function ($$v) {_vm.$set(_vm.form, \"schedule\", $$v)},expression:\"form.schedule\"}}),_vm._v(\" \"),_c('el-switch',{staticClass:\"w-150\",attrs:{\"active-text\":\"Weekly\",\"active-value\":\"weekly\"},model:{value:(_vm.form.schedule),callback:function ($$v) {_vm.$set(_vm.form, \"schedule\", $$v)},expression:\"form.schedule\"}}),_vm._v(\" \"),_c('el-switch',{staticClass:\"w-150\",attrs:{\"active-text\":\"Monthly\",\"active-value\":\"monthly\"},model:{value:(_vm.form.schedule),callback:function ($$v) {_vm.$set(_vm.form, \"schedule\", $$v)},expression:\"form.schedule\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"flex align-items-center h-30 mt-2\"},[_c('el-switch',{staticClass:\"w-150\",attrs:{\"active-text\":\"BiMonthly\",\"active-value\":\"bimonthly\"},model:{value:(_vm.form.schedule),callback:function ($$v) {_vm.$set(_vm.form, \"schedule\", $$v)},expression:\"form.schedule\"}}),_vm._v(\" \"),_c('el-switch',{staticClass:\"w-150\",attrs:{\"active-text\":\"Quarterly\",\"active-value\":\"quarterly\"},model:{value:(_vm.form.schedule),callback:function ($$v) {_vm.$set(_vm.form, \"schedule\", $$v)},expression:\"form.schedule\"}}),_vm._v(\" \"),_c('el-switch',{staticClass:\"w-150\",attrs:{\"active-text\":\"Yearly\",\"active-value\":\"yearly\"},model:{value:(_vm.form.schedule),callback:function ($$v) {_vm.$set(_vm.form, \"schedule\", $$v)},expression:\"form.schedule\"}})],1)]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"el-fade-in\"}},[(_vm.form.schedule === 'daily')?_c('el-form-item',{attrs:{\"label\":\"time of trasactions postings\"}},[_c('el-time-select',{attrs:{\"picker-options\":{\n                                start: '08:30',\n                                step: '00:15',\n                                end: '18:30'\n                            },\"placeholder\":\"Select time\"},model:{value:(_vm.schedule.time),callback:function ($$v) {_vm.$set(_vm.schedule, \"time\", $$v)},expression:\"schedule.time\"}})],1):(_vm.form.schedule === 'weekly')?_c('el-form-item',{attrs:{\"label\":\"date & time of trasactions postings\"}},[_c('el-select',{attrs:{\"placeholder\":\"select day\"},model:{value:(_vm.schedule.date),callback:function ($$v) {_vm.$set(_vm.schedule, \"date\", $$v)},expression:\"schedule.date\"}},_vm._l((_vm.days),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item,\"value\":item}})})),_vm._v(\" \"),_c('el-time-select',{attrs:{\"picker-options\":{\n                                start: '08:30',\n                                step: '00:15',\n                                end: '18:30'\n                            },\"placeholder\":\"Select time\"},model:{value:(_vm.schedule.time),callback:function ($$v) {_vm.$set(_vm.schedule, \"time\", $$v)},expression:\"schedule.time\"}})],1):_c('el-form-item',{attrs:{\"label\":\"date & time of trasactions postings\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"Date\",\"value-format\":\"yyyy-MM-dd\",\"format\":\"MMM dd, yyyy\",\"default-value\":Date.now()},model:{value:(_vm.schedule.date),callback:function ($$v) {_vm.$set(_vm.schedule, \"date\", $$v)},expression:\"schedule.date\"}}),_vm._v(\" \"),_c('el-time-select',{attrs:{\"picker-options\":{\n                                start: '08:30',\n                                step: '00:15',\n                                end: '18:30'\n                            },\"placeholder\":\"Select time\"},model:{value:(_vm.schedule.time),callback:function ($$v) {_vm.$set(_vm.schedule, \"time\", $$v)},expression:\"schedule.time\"}})],1)],1)],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Upload CSV\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":\"\",\"on-change\":_vm.onChange,\"auto-upload\":false,\"accept\":\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\",\"file-list\":_vm.form.fileList}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"Click to upload\")])],1),_vm._v(\" \"),(_vm.fileError)?_c('div',{staticClass:\"mt-2\"},[_c('p',{staticClass:\"p-0 m-0\"},[_vm._v(\"Error in Uploading File\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"loading\":_vm.fileUploading,\"icon\":\"sync icon\"},on:{\"click\":_vm.onChange}},[_vm._v(\"Retry\")])],1):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Download File Format\"}},[_c('a',{attrs:{\"download\":\"\",\"href\":\"../../../static/Batch_file_format.csv\"}},[_vm._v(\"Download file format\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"flex justify-content-end\"},[_c('p',{staticClass:\"s-12\"},[_vm._v(\"NB: Vodafone numbers not supported\")])])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2ef9ca4a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/transactions/pages/NewJob.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2ef9ca4a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NewJob.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./NewJob.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./NewJob.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2ef9ca4a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./NewJob.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2ef9ca4a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/transactions/pages/NewJob.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}