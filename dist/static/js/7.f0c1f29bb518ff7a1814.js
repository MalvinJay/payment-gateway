webpackJsonp([7],{"2W9D":function(e,t){},myTt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Dd8w"),a=s.n(n),o=s("Usg1"),i=s("NYxO"),r=(s("Y+wi"),s("PJh5"),{name:"TopupAccount",props:["modalVisible"],data:function(){return{form:{bank_name:"N/A",currency:"Ghs",country_code:"GH",live:!0,dummy:!1,service_code:"cash_transfer",integration_type:"FLOPAY_WEB",is_direct_transfer:!0},options:[{name:"Cash In",value:"cashin"},{name:"Cash Out",value:"cashout"}],rules:{recipient_no:[{required:!0,min:10,max:10,message:"Length should be 10",trigger:"blur"}],sender_amount:[{required:!0,message:"This field is required",trigger:"blur"}],recipient_amount:[{required:!0,message:"This field is required",trigger:"blur"}]},loading:!1}},methods:{close:function(){this.form={bank_name:"N/A",currency:"Ghs",country_code:"GH",live:!0,dummy:!1,service_code:"cash_transfer",integration_type:"FLOPAY_WEB",is_direct_transfer:!0},o.a.$emit("settlementModal",!1)},createLog:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){e?(t.form.live=!t.test,t.form.dummy=t.test,t.form.account_no=t.form.account_no?t.form.account_no:"others",t.$store.dispatch("createSettlement",t.form).then(function(e){e.data.success?(t.$message({type:"success",message:e.data.response.message}),t.close()):t.$message({type:"error",message:e.data.response.message}),t.loading=!1}).catch(function(e){t.loading=!1;var s=e.response;t.$message({message:s.data.error,type:"error"})})):(t.loading=!1,t.$message({message:"Please correct the errors",type:"error"}))})}},computed:a()({},Object(i.b)({providers:"banks",test:"test"}))}),l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"custom-class":"export-dialog",title:"Initiate Settlement",visible:e.modalVisible,width:"35%"},on:{close:e.close}},[s("div",{staticClass:"flex justify-content-center new-transaction-bg"},[s("el-form",{ref:"form",staticClass:"transaction-form mt-2",attrs:{size:"mini","hide-required-asterisk":"",rules:e.rules,model:e.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"Bank Name"}},[s("el-select",{model:{value:e.form.bank_name,callback:function(t){e.$set(e.form,"bank_name",t)},expression:"form.bank_name"}},[s("el-option",{attrs:{label:"Direct Transfer",value:"N/A"}}),e._v(" "),e._l(e.providers,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.code}})})],2)],1),e._v(" "),"N/A"===e.form.bank_name?s("el-form-item",{attrs:{label:"Location"}},[s("el-input",{model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1):s("div",[s("el-form-item",{attrs:{label:"Name on Account"}},[s("el-input",{model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Account Number"}},[s("el-input",{model:{value:e.form.account_no,callback:function(t){e.$set(e.form,"account_no",t)},expression:"form.account_no"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Branch"}},[s("el-input",{model:{value:e.form.branch,callback:function(t){e.$set(e.form,"branch",t)},expression:"form.branch"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"Amount",prop:"amount"}},[s("el-input",{staticClass:"little-padding-input",model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}},[s("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("â‚µ")])])],1),e._v(" "),s("el-form-item",{attrs:{label:"Name",prop:"recipient_name"}},[s("el-input",{model:{value:e.form.recipient_name,callback:function(t){e.$set(e.form,"recipient_name",t)},expression:"form.recipient_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Remarks"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"z-depth-button b-0 open-sans black-text",attrs:{size:"mini"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("el-button",{staticClass:"z-depth-button b-0 bold-500 open-sans white-text",attrs:{size:"mini",loading:e.loading,type:"primary"},on:{click:function(t){e.createLog("form")}}},[e._v("Initiate Settlement")])],1)])},staticRenderFns:[]};var c={name:"Settlements",components:{SettlementModal:s("VU/8")(r,l,!1,function(e){s("y99r")},"data-v-0e86d394",null).exports},data:function(){return{test:!0,columns:[{label:"Customer",dataField:"customer",width:"250"},{label:"Reference",dataField:"reference",width:"auto"}],styleObject:{fontSize:"12px"},settlementVisible:!1}},created:function(){this.$store.dispatch("getSettlements")},mounted:function(){var e=this;o.a.$emit("sideNavClick","settlements"),o.a.$on("settlementModal",function(t){e.settlementVisible=!1})},beforeDestroy:function(){var e=this;o.a.$off("settlementModal",function(t){e.settlementVisible=!1})},methods:{handleCurrentChange:function(e){this.$store.dispatch("getSettlements",{page:e,cache:!1})},clickRow:function(e,t,s){},fetchSettlements:function(){this.$store.dispatch("getSettlements")},handleCommand:function(e,t){switch(e){case"edit":this.editJob(t.id);break;case"delete":this.deleteJob(t.id)}}},computed:a()({},Object(i.b)({settlements:"settlements",state:"settlementsState",pageSize:"pageSize"}),{error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},total:function(){return this.settlements.length},loading:function(){return"LOADING"===this.state},filteredSettlements:function(){return this.settlements.map(function(e){return e.customer=e.receiver_no+" - "+e.receiver_name,e})}})},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"transactions"},[s("div",{staticClass:"trans-div flex justify-content-between"},[s("div",{staticClass:"flex align-items-baseline"},[s("filter-component",{attrs:{dispatch:"setSettlementsFilters",filterType:"payment"}})],1),e._v(" "),s("div",[s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(t){e.settlementVisible=!0}}},[s("i",{staticClass:"plus icon"}),e._v(" New")])],1)]),e._v(" "),s("div",[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchSettlements(t)}}},[e._v("Retry")])],1)]):s("div",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"empty-text":"No Settlements","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.filteredSettlements}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{prop:"amount",label:"Amount",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 bold-500 s-13"},[e._v(e._s(e._f("money")(t.row.receiver_amount)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"status",label:""},scopedSlots:e._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},["Paid"===e.row.status?s("the-tag",{attrs:{status:"success",title:e.row.status,icon:"detail check icon"}}):"failed"===e.row.status.toLowerCase()?s("the-tag",{attrs:{status:"success",title:e.row.status,icon:"close icon"}}):s("the-tag",{attrs:{status:"failed",title:e.row.status,icon:"reply icon"}})],1)]}}])}),e._v(" "),e._l(e.columns,function(e,t){return s("el-table-column",{key:t,attrs:{width:e.width,prop:e.dataField,label:e.label}})}),e._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                    ")]}}])}),e._v(" "),s("el-table-column",{attrs:{width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"mini-menu"},["failed"===t.row.status.toLowerCase()?s("i",{staticClass:"reply icon cursor first-icon"}):e._e(),e._v(" "),s("el-dropdown",{attrs:{trigger:"click"},on:{command:function(s){return e.handleCommand(s,t.row)}}},[s("i",{staticClass:"ellipsis horizontal icon mr-0 cursor"}),e._v(" "),s("el-dropdown-menu",{staticClass:"w-200",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{disabled:""}},[s("div",{staticClass:"table-dropdown-header bold-600 text-uppercase"},[e._v("\n                                            action\n                                        ")])]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"open"}},[e._v("Open Ticket")]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12"},[e._v("Retry")]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12"},[e._v("Reverse")])],1)],1)],1)]}}])})],2),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-10"},[s("div",{staticClass:"s-12"},[e._v("\n                    "+e._s(e.settlements.length)+" results\n                ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),s("settlement-modal",{attrs:{modalVisible:e.settlementVisible}})],1)},staticRenderFns:[]};var u=s("VU/8")(c,m,!1,function(e){s("2W9D")},"data-v-24fe1171",null);t.default=u.exports},y99r:function(e,t){}});
//# sourceMappingURL=7.f0c1f29bb518ff7a1814.js.map