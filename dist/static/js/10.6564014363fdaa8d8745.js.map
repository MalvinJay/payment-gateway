{"version":3,"sources":["webpack:///src/business/components/AddGroup.vue","webpack:///./src/business/components/AddGroup.vue?145e","webpack:///./src/business/components/AddGroup.vue"],"names":["AddGroup","name","props","data","checkAll","isIndeterminate","columns","label","value","prop","loading","rules","required","message","trigger","methods","close","event_bus","$emit","handleCheckAllChange","val","this","priv","privileges","map","el","code","handleCheckedPrivilegesChange","checkedCount","length","submitForm","formName","_this","form","extends_default","client_till","$route","params","id","$refs","validate","valid","$store","dispatch","then","response","success","$message","type","catch","error","editGroup","_this2","description","approval_limit","group","computed","Object","vuex_esm","get","console","log","set","_this3","newPriv","_loop","index","exists","find","keys_default","push","components_AddGroup","render","_vm","_h","$createElement","_c","_self","attrs","custom-class","title","visible","modalVisible","width","on","staticClass","ref","staticStyle","size","model","label-width","_l","item","key","callback","$$v","$set","expression","_v","indeterminate","change","gutter","span","slice","field","_s","action","slot","click","$event","mode","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.6564014363fdaa8d8745.js","sourcesContent":["<template>\r\n    <el-dialog custom-class=\"export-dialog\"\r\n        :title=\"title\"\r\n        @close=\"close\"\r\n        :visible=\"modalVisible\"\r\n        width=\"35%\">\r\n        <div class=\"flex justify-content-center new-export-bg\">\r\n            <el-form class=\"transaction-form my-2\" size=\"mini\" style=\"width: 90%\" :rules=\"rules\" ref=\"form\" :model=\"form\" label-width=\"150px\">\r\n                <el-form-item :prop=\"item.prop\" v-for=\"(item, index) in columns\" :key=\"index\" :label=\"item.label\">\r\n                    <el-input v-model=\"form[item.value]\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"Privileges\" class=\"my-2 privileges\">\r\n                    <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">Check all</el-checkbox>\r\n                    <el-checkbox-group @change=\"handleCheckedPrivilegesChange\" v-model=\"priv\">\r\n                        <el-row :gutter=\"20\">\r\n                            <el-col :span=\"12\">\r\n                                <el-checkbox class=\"no-margin-checkbox m-0\" v-for=\"(field, index) in privileges.slice(0, 7)\" :key=\"index\" :label=\"field.code\">{{field.action}}</el-checkbox>\r\n                            </el-col>\r\n                            <el-col class=\"flex flex-column\" :span=\"12\">\r\n                                <el-checkbox class=\"no-margin-checkbox m-0\" v-for=\"(field, index) in privileges.slice(8, 13)\" :key=\"index\" :label=\"field.code\">{{field.action}}</el-checkbox>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </el-checkbox-group>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n        <div class=\"flex justify-content-end\" slot=\"footer\">\r\n            <el-button size=\"mini\" @click=\"close\">Cancel</el-button>\r\n            <el-button size=\"mini\" :loading=\"loading\" type=\"primary\" @click=\"mode === 'new' ? submitForm('form') : editGroup('form')\">Submit</el-button>\r\n        </div>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport EventBus from '../../event-bus.js'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n  name: 'NewGroup',\r\n  props: ['modalVisible', 'title', 'form', 'mode'],\r\n  data () {\r\n    return {\r\n      checkAll: false,\r\n      isIndeterminate: true,\r\n      columns: [\r\n        {label: 'Group Name', value: 'name', prop: 'name'},\r\n        {label: 'Description', value: 'description', prop: 'description'},\r\n        {label: 'Limit: GHÂ¢', value: 'approval_limit', prop: 'approval_limit'}\r\n      ],\r\n      loading: false,\r\n      rules: {\r\n        name: [\r\n          { required: true, message: 'This field is required', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    close () {\r\n      EventBus.$emit('groupModal', false)\r\n    },\r\n    handleCheckAllChange (val) {\r\n        this.priv = val ? this.privileges.map(el => el.code) : []\r\n        this.isIndeterminate = false\r\n    },\r\n    handleCheckedPrivilegesChange(value) {\r\n        let checkedCount = value.length\r\n        this.checkAll = checkedCount === this.privileges.length\r\n        this.isIndeterminate = checkedCount > 0 && checkedCount < this.privileges.length\r\n    },\r\n    submitForm (formName) {\r\n        this.loading = true\r\n        var form = {\r\n            ...this.form,\r\n            privileges: this.form.privileges.map(el => el.code),\r\n            client_till: this.$route.params.id\r\n        }\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.$store.dispatch('createRole', form)\r\n            .then((response) => {\r\n                this.loading = false\r\n                if (response.data.success) {\r\n                    this.close()\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: response.data.response.message,\r\n                    })\r\n                    this.$store.dispatch('getRoles')\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        message: response.data.response.message,\r\n                    })\r\n                }\r\n            }).catch((error) => {\r\n                const response = error.response\r\n                this.$message({\r\n                    type: 'error',\r\n                    message: response.data.error,\r\n                })\r\n            })\r\n          } else {\r\n            this.loading = false\r\n            this.$message({\r\n                type: 'error',\r\n                message: 'Please correctly fill all fields',\r\n            })  \r\n          }\r\n        })\r\n    },\r\n    editGroup (formName) {\r\n        this.loading = true\r\n        var form = {\r\n            name: this.form.name,\r\n            privileges: this.form.privileges.map(el => el.code),\r\n            description: this.form.description,\r\n            approval_limit: this.form.approval_limit\r\n        }\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            this.$store.dispatch('createRole', { group: form, id: this.form.id })\r\n            .then((response) => {\r\n                this.loading = false\r\n                if (response.data.success) {\r\n                    this.close()\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: response.data.response.message,\r\n                    })\r\n                    this.$store.dispatch('getRoles')\r\n                } else {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        message: response.data.response.message,\r\n                    })\r\n                }\r\n            }).catch((error) => {\r\n                this.loading = false\r\n                const response = error.response\r\n                this.$message({\r\n                    type: 'error',\r\n                    message: response.data.error,\r\n                })\r\n            })\r\n          } else {\r\n            this.loading = false\r\n            this.$message({\r\n                type: 'error',\r\n                message: 'Please correctly fill all fields',\r\n            })  \r\n          }\r\n        })\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n        privileges: 'privileges'\r\n    }),\r\n    priv: {\r\n        get () {\r\n            console.log('FORM:', this.form)\r\n            return this.form.privileges.map(el => el.code)\r\n        },\r\n        set (val) {\r\n            console.log('priv', val)\r\n            var newPriv = []\r\n            for (let index = 0; index < val.length; index++) {\r\n                var exists = this.privileges.find(el => el.code === val[index])\r\n                console.log('exists', exists)\r\n                if(Object.keys(exists).length > 0) {\r\n                    newPriv.push(exists)\r\n                }\r\n            }\r\n            this.form.privileges = newPriv\r\n        }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-tag{\r\n    margin-right: 10px;\r\n}\r\n  .button-new-tag {\r\n    height: 32px;\r\n    line-height: 30px;\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n  }\r\n  .input-new-tag {\r\n    width: 120px;\r\n    vertical-align: bottom;\r\n  }\r\n.el-checkbox__label{\r\n    font-size: 12px !important;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/business/components/AddGroup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"custom-class\":\"export-dialog\",\"title\":_vm.title,\"visible\":_vm.modalVisible,\"width\":\"35%\"},on:{\"close\":_vm.close}},[_c('div',{staticClass:\"flex justify-content-center new-export-bg\"},[_c('el-form',{ref:\"form\",staticClass:\"transaction-form my-2\",staticStyle:{\"width\":\"90%\"},attrs:{\"size\":\"mini\",\"rules\":_vm.rules,\"model\":_vm.form,\"label-width\":\"150px\"}},[_vm._l((_vm.columns),function(item,index){return _c('el-form-item',{key:index,attrs:{\"prop\":item.prop,\"label\":item.label}},[_c('el-input',{model:{value:(_vm.form[item.value]),callback:function ($$v) {_vm.$set(_vm.form, item.value, $$v)},expression:\"form[item.value]\"}})],1)}),_vm._v(\" \"),_c('el-form-item',{staticClass:\"my-2 privileges\",attrs:{\"label\":\"Privileges\"}},[_c('el-checkbox',{attrs:{\"indeterminate\":_vm.isIndeterminate},on:{\"change\":_vm.handleCheckAllChange},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"Check all\")]),_vm._v(\" \"),_c('el-checkbox-group',{on:{\"change\":_vm.handleCheckedPrivilegesChange},model:{value:(_vm.priv),callback:function ($$v) {_vm.priv=$$v},expression:\"priv\"}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},_vm._l((_vm.privileges.slice(0, 7)),function(field,index){return _c('el-checkbox',{key:index,staticClass:\"no-margin-checkbox m-0\",attrs:{\"label\":field.code}},[_vm._v(_vm._s(field.action))])})),_vm._v(\" \"),_c('el-col',{staticClass:\"flex flex-column\",attrs:{\"span\":12}},_vm._l((_vm.privileges.slice(8, 13)),function(field,index){return _c('el-checkbox',{key:index,staticClass:\"no-margin-checkbox m-0\",attrs:{\"label\":field.code}},[_vm._v(_vm._s(field.action))])}))],1)],1)],1)],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"flex justify-content-end\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.close}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":function($event){_vm.mode === 'new' ? _vm.submitForm('form') : _vm.editGroup('form')}}},[_vm._v(\"Submit\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-66dcc1fa\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/business/components/AddGroup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-66dcc1fa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddGroup.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddGroup.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddGroup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-66dcc1fa\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddGroup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-66dcc1fa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/business/components/AddGroup.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}