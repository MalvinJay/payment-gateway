webpackJsonp([16],{"38X6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),o=a("NYxO"),i=a("Usg1"),r=(a("PJh5"),{name:"Webhooks",data:function(){return{isTest:!0,styleObject:{fontSize:"12px"},loading:!1,dialogVisible:!1,radio:1,event:1,form:{id:1,test_url:"",production_url:"",webhook_versions:[{id:1,name:"v1",date:"2018-01-01",tag:"default"},{id:2,name:"v2",date:"2018-07-01",tag:"latest"}],subscribed_event:[{id:1,type:"Send all event types"},{id:2,type:"Select types to send"}]},services:["account.updated","account.application.authorized","account.application.deauthorized","account.external_account.created","account.external_account.deleted","account.external_account.updated","application_fee.created","application_fee.refunded","application_fee.refund.updated","balance.available","charge.captured","charge.expired","charge.failed","charge.pending","charge.refunded","charge.succeeded","charge.updated","charge.dispute.closed","charge.dispute.created","charge.dispute.funds_reinstated","charge.dispute.funds_withdrawn","charge.dispute.updated","charge.refund.updated","customer.created","customer.deleted","customer.updated","customer.bank_account.deleted","file.created","invoice.created","invoice.deleted","invoice.payment_failed","invoice.payment_succeeded","invoice.sent","invoice.upcoming","invoice.updated","invoiceitem.created"],createLoading:!1,webhooks:[{url:"https://flopay-callback.free.beeceptor.com",version:"2018-01-02",status:"success",Retry_history:"2018/11/22 12:08 to https://flopay-callback.free.beeceptor.com",statusCode:200,request:{id:"evt_1DZGzKA4jBSsp2qWd78MpJ3p",object:"event",api_version:"2018-09-24",created:1542888534,data:{object:{object:"balance",available:[{currency:"usd",amount:155830,source_types:{card:155830}}],connect_reserved:[{currency:"usd",amount:0}],livemode:!1,pending:[{currency:"usd",amount:0,source_types:{card:0}}]}},livemode:!1,pending_webhooks:1,request:{id:null,idempotency_key:null},type:"balance.available"}},{url:"https://flopay-sync.free.beeceptor.com",version:"2018-01-02",status:"success",Retry_history:"2018/11/22 12:08 to https://flopay-sync.free.beeceptor.com",statusCode:200,request:{id:"evt_1DZGzKA4jBSsp2qWd78MpJ3p",object:"event",api_version:"2018-09-24",created:1542888534,data:{object:{object:"balance",available:[{currency:"ghs",amount:155830,source_types:{card:155830}}],connect_reserved:[{currency:"ghs",amount:0}],livemode:!1,pending:[{currency:"ghs",amount:0,source_types:{card:0}}]}},livemode:!1,pending_webhooks:1,request:{id:null,idempotency_key:null},type:"balance.available"}},{url:"https://flopay-test.free.beeceptor.com",version:"2018-01-02",status:"failed",Retry_history:"2018/11/22 12:08 to https://flopay-test.free.beeceptor.com",statusCode:401,request:{id:"evt_1DZGzKA4jBSsp2qWd78MpJ3p",object:"event",api_version:"2018-09-24",created:1542888534,data:{object:{object:"balance",available:[{currency:"gbp",amount:155830,source_types:{card:155830}}],connect_reserved:[{currency:"gbp",amount:0}],livemode:!1,pending:[{currency:"gbp",amount:0,source_types:{card:0}}]}},livemode:!1,pending_webhooks:1,request:{id:null,idempotency_key:null},type:"balance.available"}}],appsHooks:[]}},created:function(){this.$store.dispatch("getLogs")},mounted:function(){i.a.$emit("sideNavClick","webhooks")},methods:{clickRow:function(e,t,a){a.property},SaveWebhook:function(){var e=this;this.createLoading=!0,console.log("Form to Sent:",this.form);var t=[];t.push(this.form.test_url,this.form.test_url),console.log("Query:",t),this.$store.dispatch("getCurrentHook",t).then(function(t){t.data.success?(e.$message({type:"success",message:t.data.response.message}),e.createLoading=!1):e.$message({type:"error",message:t.data.response.message.message}),e.createLoading=!1}).catch(function(t){e.createLoading=!1;var a=t.response;e.$message({type:"error",message:a.data.error})})},handleCheckAllChange:function(e){this.priv=e?this.privileges.map(function(e){return e.code}):[],this.isIndeterminate=!1},handleCheckedPrivilegesChange:function(e){var t=e.length;this.checkAll=t===this.privileges.length,this.isIndeterminate=t>0&&t<this.privileges.length}},computed:n()({},Object(o.b)({hooks:"hooks",state:"hooksState",meta:"hooksMeta",user:"user"}),{filteredLogs:function(){return this.hooks},error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},total:function(){return this.meta.totalCount},loadingPage:function(){return"LOADING"===this.state},client:function(){return this.user}})}),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"transactions",class:[{"test-data":e.isTest}]},[a("el-card",{staticClass:"mb-2"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex justify-content-between align-items-center"},[a("div",{staticClass:"blue-text bold-600"},[e._v("Endpoints receiving events from your account")]),e._v(" "),a("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button b-0",attrs:{disabled:e.error,loading:e.loading,size:"mini",plain:""},on:{click:function(t){e.dialogVisible=!0}}},[a("i",{staticClass:"plus icon"}),e._v(" Add endpoint ")])],1)]),e._v(" "),a("div",{staticClass:"flex justify-content-center"},[e.error?a("div",{staticClass:"center h-80"},[a("div",{staticClass:"center flex-column"},[a("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),a("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.webhooks(t)}}},[e._v("Retry")])],1)]):a("div",{staticClass:"callbacks breathe w-100 s-13"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],attrs:{"empty-text":"You have not defined any webhooks yet","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.webhooks}},[a("el-table-column",{attrs:{prop:"url",label:"URL"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.url||"N/A")+"\n                        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"VERSION",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.version||"N/A")+"\n                        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"MODE",width:"125"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("the-tag",{staticClass:"w-50",attrs:{status:"success",title:"Test",icon:"detail check icon"}})]}}])})],1)],1)])]),e._v(" "),a("el-card",{staticClass:"mb-2",class:[{"test-data":e.isTest}]},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex justify-content-between align-items-center"},[a("div",{staticClass:"blue-text bold-600"},[e._v("Endpoints receiving events from Connect applications")]),e._v(" "),a("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button b-0",attrs:{disabled:e.error,loading:e.loading,size:"mini",plain:""},on:{click:e.filteredLogs}},[a("i",{staticClass:"plus icon"}),e._v(" Add endpoint ")])],1)]),e._v(" "),a("div",{staticClass:"flex justify-content-center"},[e.error?a("div",{staticClass:"center h-80"},[a("div",{staticClass:"center flex-column"},[a("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),a("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.webhooks(t)}}},[e._v("Retry")])],1)]):e._e(),e._v(" "),a("div",{staticClass:"callbacks breathe w-100 s-13"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],attrs:{"empty-text":"You have not defined any webhooks yet","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.appsHooks}},[a("el-table-column",{attrs:{prop:"url",label:"URL"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.test_url||"N/A")+"\n                        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"VERSION",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.version||"N/A")+"\n                        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"MODE",width:"125"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("the-tag",{attrs:{status:"success",title:"Test",icon:"detail check icon"}})]}}])})],1)],1)])]),e._v(" "),a("el-dialog",{attrs:{"custom-class":"new-transaction",title:"Add a webhook endpoint",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"flex justify-content-center new-transaction-bg"},[a("el-form",{ref:"form",staticClass:"transaction-form",attrs:{size:"mini","hide-required-asterisk":"",model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Test URL"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.test_url,callback:function(t){e.$set(e.form,"test_url",t)},expression:"form.test_url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Production URL"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.production_url,callback:function(t){e.$set(e.form,"production_url",t)},expression:"form.production_url"}})],1),e._v(" "),a("el-form-item",{staticClass:"h-auto",attrs:{label:"Webhook version",prop:"version"}},e._l(e.form.webhook_versions,function(t,s){return a("div",{key:s,staticClass:"flex align-items-center w-100"},[a("el-radio",{attrs:{label:t.id},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),e._v(" "),a("div",{staticClass:"flex align-items-center w-100 px-10"},[a("span",{staticClass:"pr-6"},[e._v(e._s(t.date))]),e._v(" "),a("div",{staticClass:"flex align-items-center"},["default"===t.tag?a("the-tag",{attrs:{status:"pending",title:t.tag,icon:"detail check icon"}}):e._e(),e._v(" "),"latest"===t.tag?a("the-tag",{attrs:{status:"success",title:t.tag,icon:"detail check icon"}}):e._e()],1)])],1)})),e._v(" "),a("el-form-item",{attrs:{label:"Filter events",prop:"event"}},e._l(e.form.subscribed_event,function(t,s){return a("div",{key:s,staticClass:"flex align-items-center"},[a("el-radio",{attrs:{label:t.id},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}}),e._v(" "),a("div",{staticClass:"px-10"},[a("span",[e._v(e._s(t.type))]),e._v(" "),a("div",[a("span",[e._v(e._s(t.tag))])])])],1)})),e._v(" "),a("el-form-item",{staticClass:"filtered-events m-0",attrs:{label:"Events",prop:"event"}},[a("el-checkbox-group",{on:{change:e.handleCheckedPrivilegesChange},model:{value:e.event,callback:function(t){e.event=t},expression:"event"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},e._l(e.services,function(t,s){return a("div",{key:s,staticClass:"flex align-items-center events"},[a("el-checkbox",{staticClass:"no-margin-checkbox m-0",attrs:{label:t},model:{value:e.event,callback:function(t){e.event=t},expression:"event"}},[e._v(e._s(t))]),e._v(" "),a("div",{staticClass:"px-10"},[a("span",[e._v(e._s(t))])])],1)}))],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer py-10",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"z-depth-button b-0 open-sans black-text",attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{staticClass:"z-depth-button b-0 bold-500 open-sans white-text",attrs:{size:"mini",loading:e.createLoading,type:"primary"},on:{click:function(t){e.SaveWebhook("form")}}},[e._v("Add endpoint")])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(r,c,!1,function(e){a("dkj1")},"data-v-586a8006",null);t.default=l.exports},dkj1:function(e,t){}});
//# sourceMappingURL=16.fb7ba4d82ea3927d6b48.js.map