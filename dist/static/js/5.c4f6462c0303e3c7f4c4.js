webpackJsonp([5],{"m/NA":function(e,t){},"z/uQ":function(e,t){},z1Ms:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("Dd8w"),s=o.n(a),n=o("Usg1"),l=o("NYxO"),i=(o("Y+wi"),o("PJh5"),{name:"TopupAccount",props:["modalVisible"],data:function(){return{checkAll:!1,topupoption:"flopay",form:{currency:"ghs"},options:[{name:"Flopay Wallet",value:"flopay"},{name:"External Wallet",value:"external"}],rules:{amount:[{required:!0,message:"This field is required",trigger:"blur"}]},loading:!1}},methods:{close:function(){n.a.$emit("topupModal",!1)},createLog:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){if(e){var o="",a={};"flopay"===t.topupoption?(o="v1/ova/topup",a=t.form):(o="v1/ova/wallet/topup",a=s()({},t.form,{country_code:"GH",service_code:"cashout",live:!0})),t.$store.dispatch("topupOVA",{url:o,ova:a}).then(function(e){e.data.success?(t.$message({type:"success",message:e.data.response.message}),t.$store.dispatch("getBalance"),t.$store.dispatch("getFoneMessengers",{cache:!1}),t.close()):t.$message({type:"error",message:e.data.response.message}),t.loading=!1}).catch(function(e){t.loading=!1;var o=e.response;t.$message({message:o.data.error,type:"error"})})}else t.loading=!1,t.$message({message:"Please correct the errors",type:"error"})})}},computed:s()({},Object(l.b)({providers:"providers"}))}),r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{"custom-class":"export-dialog",title:"Top-Up EVA",visible:e.modalVisible,width:"35%"},on:{close:e.close}},[o("div",{staticClass:"flex justify-content-center new-export-bg"},[o("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{"hide-required-asterisk":"",size:"mini",rules:e.rules,model:e.form,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"Topup Type"}},[o("el-select",{staticClass:"w-75",model:{value:e.topupoption,callback:function(t){e.topupoption=t},expression:"topupoption"}},e._l(e.options,function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"Amount",prop:"amount"}},[o("el-input",{staticClass:"w-75",model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}},[o("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("GHs")])])],1),e._v(" "),"external"===e.topupoption?o("div",[o("el-form-item",{attrs:{label:"Provider"}},[o("el-select",{staticClass:"w-75",model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}},e._l(e.providers,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"Phone",prop:"phone"}},[o("el-input",{staticClass:" w-75",model:{value:e.form.customer_no,callback:function(t){e.$set(e.form,"customer_no",t)},expression:"form.customer_no"}})],1),e._v(" "),"vodafone"===e.form.provider?o("el-form-item",{attrs:{label:"Voucher"}},[o("el-input",{staticClass:" w-75",model:{value:e.form.voucher,callback:function(t){e.$set(e.form,"voucher",t)},expression:"form.voucher"}})],1):e._e()],1):e._e(),e._v(" "),o("el-form-item",[o("div",{staticClass:"flex justify-content-end w-100"},[o("el-button",{attrs:{type:"text"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),o("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){e.createLog("form")}}},[e._v("Create")])],1)])],1)],1)])},staticRenderFns:[]};var c={name:"TopUps",components:{TopupModal:o("VU/8")(i,r,!1,function(e){o("z/uQ")},"data-v-82d11d3a",null).exports},data:function(){return{test:!0,columns:[{label:"Customer",dataField:"receiver_name",width:"auto"},{label:"Reference",dataField:"reference",width:"auto"},{label:"type",dataField:"remarks",width:"150px"}],styleObject:{fontSize:"12px"},topupVisible:!1}},created:function(){this.$store.dispatch("getTopUps")},mounted:function(){var e=this;n.a.$emit("sideNavClick","topups"),n.a.$on("topupModal",function(t){e.topupVisible=!1})},beforeDestroy:function(){var e=this;n.a.$off("topupModal",function(t){e.topupVisible=!1})},methods:{handleCurrentChange:function(e){this.$store.dispatch("getTopUps",{page:e,cache:!1})},clickRow:function(e,t,o){},fetchTopUps:function(){this.$store.dispatch("getJobs")},handleCommand:function(e,t){switch(e){case"edit":this.editJob(t.id);break;case"delete":this.deleteJob(t.id)}}},computed:s()({},Object(l.b)({topups:"topups",state:"topupsState",pageSize:"pageSize"}),{error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},total:function(){return this.topups.length},loading:function(){return"LOADING"===this.state}})},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",{staticClass:"transactions"},[o("div",{staticClass:"trans-div flex justify-content-between"},[o("div",{staticClass:"flex align-items-baseline"},[o("filter-component",{attrs:{dispatch:"setTopUpsFilters",filterType:"payment"}})],1),e._v(" "),o("div",[o("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(t){e.topupVisible=!0}}},[o("i",{staticClass:"plus icon"}),e._v(" New")])],1)]),e._v(" "),o("div",[e.error?o("div",{staticClass:"center h-80"},[o("div",{staticClass:"center flex-column"},[o("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),o("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchTopUps(t)}}},[e._v("Retry")])],1)]):o("div",{staticClass:"breathe"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"empty-text":"No Topups","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.topups},on:{"row-click":e.clickRow}},[o("el-table-column",{attrs:{prop:"amount",label:"Amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("p",{staticClass:"m-0 p-0 mr-10 bold-500 s-13"},[e._v(e._s(e._f("money")(t.row.receiver_amount)))])]}}])}),e._v(" "),e._l(e.columns,function(e,t){return o("el-table-column",{key:t,attrs:{"show-overflow-tooltip":"",width:e.width,prop:e.dataField,label:e.label}})}),e._v(" "),o("el-table-column",{attrs:{prop:"created_at",label:"Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                    ")]}}])})],2),e._v(" "),o("div",{staticClass:"flex justify-content-between align-items-center px-10"},[o("div",{staticClass:"s-12"},[e._v("\n                    "+e._s(e.topups.length)+" results\n                ")]),e._v(" "),o("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),o("topup-modal",{attrs:{modalVisible:e.topupVisible}})],1)},staticRenderFns:[]};var u=o("VU/8")(c,p,!1,function(e){o("m/NA")},"data-v-413cd254",null);t.default=u.exports}});
//# sourceMappingURL=5.c4f6462c0303e3c7f4c4.js.map