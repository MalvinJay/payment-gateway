webpackJsonp([6],{"2W9D":function(t,e){},"G+Ww":function(t,e){},myTt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Dd8w"),a=s.n(n),o=s("Usg1"),r=s("NYxO"),i=(s("Y+wi"),s("PJh5"),{name:"TopupAccount",props:["modalVisible"],data:function(){return{form:{bank_name:"N/A",currency:"Ghs",country_code:"GH",live:!0,dummy:!1,service_code:"cash_transfer",integration_type:"FLOPAY_WEB",is_direct_transfer:!0},options:[{name:"Cash In",value:"cashin"},{name:"Cash Out",value:"cashout"}],rules:{recipient_no:[{required:!0,min:10,max:10,message:"Length should be 10",trigger:"blur"}],amount:[{validator:function(t,e,s){if(!e)return s(new Error("This field is required"));setTimeout(function(){Number(e)<1e3?s(new Error("Amount must be greater than GHc1000")):s()},1e3)},trigger:"blur"}],recipient_amount:[{required:!0,message:"This field is required",trigger:"blur"}]},loading:!1}},methods:{close:function(){this.form={bank_name:"N/A",currency:"Ghs",country_code:"GH",live:!0,dummy:!1,service_code:"cash_transfer",integration_type:"FLOPAY_WEB",is_direct_transfer:!0},o.a.$emit("settlementModal",!1)},createLog:function(t){var e=this;this.loading=!0,this.$refs[t].validate(function(t){t?(e.form.live=!e.test,e.form.dummy=e.test,e.form.account_no=e.form.account_no?e.form.account_no:"others",e.$store.dispatch("createSettlement",e.form).then(function(t){t.data.success?(e.$message({type:"success",message:t.data.response.message}),e.close()):e.$message({type:"error",message:t.data.response.message}),e.loading=!1}).catch(function(t){e.loading=!1;var s=t.response;e.$message({message:s.data.error,type:"error"})})):(e.loading=!1,e.$message({message:"Please correct the errors",type:"error"}))})}},computed:a()({},Object(r.b)({providers:"banks",test:"test"}))}),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{"custom-class":"export-dialog",title:"Initiate Settlement",visible:t.modalVisible,width:"35%"},on:{close:t.close}},[s("div",{staticClass:"flex justify-content-center new-transaction-bg"},[s("el-form",{ref:"form",staticClass:"transaction-form mt-2 w-70",attrs:{size:"mini","hide-required-asterisk":"",rules:t.rules,model:t.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"Bank Name"}},[s("el-select",{staticClass:"w-100",attrs:{filterable:""},model:{value:t.form.bank_name,callback:function(e){t.$set(t.form,"bank_name",e)},expression:"form.bank_name"}},[s("el-option",{attrs:{label:"Direct Transfer",value:"N/A"}}),t._v(" "),t._l(t.providers,function(t,e){return s("el-option",{key:e,attrs:{label:t.name,value:t.code}})})],2)],1),t._v(" "),"N/A"===t.form.bank_name?s("el-form-item",{attrs:{label:"Location"}},[s("el-input",{model:{value:t.form.location,callback:function(e){t.$set(t.form,"location",e)},expression:"form.location"}})],1):s("div",[s("el-form-item",{attrs:{label:"Name on Account"}},[s("el-input",{model:{value:t.form.location,callback:function(e){t.$set(t.form,"location",e)},expression:"form.location"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"Account Number"}},[s("el-input",{model:{value:t.form.account_no,callback:function(e){t.$set(t.form,"account_no",e)},expression:"form.account_no"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"Branch"}},[s("el-input",{model:{value:t.form.branch,callback:function(e){t.$set(t.form,"branch",e)},expression:"form.branch"}})],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"Amount",prop:"amount"}},[s("el-input",{staticClass:"little-padding-input",model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[s("span",{attrs:{slot:"prefix"},slot:"prefix"},[t._v("â‚µ")])])],1),t._v(" "),s("el-form-item",{attrs:{label:"Name",prop:"recipient_name"}},[s("el-input",{model:{value:t.form.recipient_name,callback:function(e){t.$set(t.form,"recipient_name",e)},expression:"form.recipient_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"Remarks"}},[s("el-input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"z-depth-button b-0 open-sans black-text",attrs:{size:"mini"},on:{click:t.close}},[t._v("Cancel")]),t._v(" "),s("el-button",{staticClass:"z-depth-button b-0 bold-500 open-sans white-text",attrs:{size:"mini",loading:t.loading,type:"primary"},on:{click:function(e){t.createLog("form")}}},[t._v("Initiate Settlement")])],1)])},staticRenderFns:[]};var c={name:"Settlements",components:{SettlementModal:s("VU/8")(i,l,!1,function(t){s("G+Ww")},"data-v-1b4a4600",null).exports},data:function(){return{test:!0,columns:[{label:"Customer",dataField:"customer",width:"250"},{label:"Reference",dataField:"reference",width:"auto"}],styleObject:{fontSize:"12px"},settlementVisible:!1}},created:function(){this.$store.dispatch("getSettlements")},mounted:function(){var t=this;o.a.$emit("sideNavClick","settlements"),o.a.$on("settlementModal",function(e){t.settlementVisible=!1})},beforeDestroy:function(){var t=this;o.a.$off("settlementModal",function(e){t.settlementVisible=!1})},methods:{handleCurrentChange:function(t){this.$store.dispatch("getSettlements",{page:t,cache:!1})},clickRow:function(t,e,s){},fetchSettlements:function(){this.$store.dispatch("getSettlements")},handleCommand:function(t,e){switch(t){case"edit":this.editJob(e.id);break;case"delete":this.deleteJob(e.id)}}},computed:a()({},Object(r.b)({settlements:"settlements",state:"settlementsState",pageSize:"pageSize"}),{error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},total:function(){return this.settlements.length},loading:function(){return"LOADING"===this.state},filteredSettlements:function(){return this.settlements.map(function(t){return t.customer=t.receiver_no+" - "+t.receiver_name,t})}})},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",{staticClass:"transactions"},[s("div",{staticClass:"trans-div flex justify-content-between"},[s("div",{staticClass:"flex align-items-baseline"},[s("filter-component",{attrs:{dispatch:"setSettlementsFilters",filterType:"payment"}})],1),t._v(" "),s("div",[s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(e){t.settlementVisible=!0}}},[s("i",{staticClass:"plus icon"}),t._v(" New")])],1)]),t._v(" "),s("div",[t.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[t._v("Unable to load this page")]),t._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(e){return e.preventDefault(),t.fetchSettlements(e)}}},[t._v("Retry")])],1)]):s("div",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"empty-text":"No Settlements","row-style":t.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:t.filteredSettlements}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),s("el-table-column",{attrs:{prop:"amount",label:"Amount",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("p",{staticClass:"m-0 p-0 mr-10 bold-500 s-13"},[t._v(t._s(t._f("money")(e.row.receiver_amount)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:""},scopedSlots:t._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex"},["Paid"===t.row.status?s("the-tag",{attrs:{status:"success",title:t.row.status,icon:"detail check icon"}}):"failed"===t.row.status.toLowerCase()?s("the-tag",{attrs:{status:"success",title:t.row.status,icon:"close icon"}}):s("the-tag",{attrs:{status:"failed",title:t.row.status,icon:"reply icon"}})],1)]}}])}),t._v(" "),t._l(t.columns,function(t,e){return s("el-table-column",{key:e,attrs:{width:t.width,prop:t.dataField,label:t.label}})}),t._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"Date"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("moment")(e.row.created_at,"D MMM,YY hh:mm A"))+"\n                    ")]}}])}),t._v(" "),s("el-table-column",{attrs:{width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"mini-menu"},["failed"===e.row.status.toLowerCase()?s("i",{staticClass:"reply icon cursor first-icon"}):t._e(),t._v(" "),s("el-dropdown",{attrs:{trigger:"click"},on:{command:function(s){return t.handleCommand(s,e.row)}}},[s("i",{staticClass:"ellipsis horizontal icon mr-0 cursor"}),t._v(" "),s("el-dropdown-menu",{staticClass:"w-200",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{disabled:""}},[s("div",{staticClass:"table-dropdown-header bold-600 text-uppercase"},[t._v("\n                                            action\n                                        ")])]),t._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"open"}},[t._v("Open Ticket")]),t._v(" "),s("el-dropdown-item",{staticClass:"s-12"},[t._v("Retry")]),t._v(" "),s("el-dropdown-item",{staticClass:"s-12"},[t._v("Reverse")])],1)],1)],1)]}}])})],2),t._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-10"},[s("div",{staticClass:"s-12"},[t._v("\n                    "+t._s(t.settlements.length)+" results\n                ")]),t._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)]),t._v(" "),s("settlement-modal",{attrs:{modalVisible:t.settlementVisible}})],1)},staticRenderFns:[]};var u=s("VU/8")(c,m,!1,function(t){s("2W9D")},"data-v-24fe1171",null);e.default=u.exports}});
//# sourceMappingURL=6.b4fc69ecbe406ec3b181.js.map