webpackJsonp([0],{"0eRG":function(e,t){},"2kht":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),o=s("Usg1"),i=(s("Y+wi"),s("NYxO")),r=s("bOdI"),l=s.n(r),c=(s("PJh5"),{name:"ExportModal",props:["modalVisible"],data:function(){return l()({checkAll:!1,form:{is_batch:!1,contacts:[]},characters:0,messages:0,message:"",fileList:[],loading:!1,column:"all",options:[{name:"Single",value:!1},{name:"File Upload",value:!0}],rules:{payment_types:[{required:!0,message:"Please select at least one option",trigger:"change"}]},inputVisible:!1,inputValue:""},"loading",!1)},watch:{message:function(){this.characters=this.message.length,this.messages=Math.ceil(this.characters/160)}},methods:{close:function(){o.a.$emit("logModal",!1)},onChange:function(e,t){this.files=t;var s=this.$el.querySelector(".upload-demo input[type='file']").files[0];this.$store.dispatch("sendToBucket",s)},handleClose:function(e){this.form.contacts.splice(this.form.contacts.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.form.contacts.push(e),this.inputVisible=!1,this.inputValue=""},createLog:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){if(e){var s={};t.form.is_batch?(t.form.file_url=t.file,s.file_url=t.file,s.is_batch=!0):(s.message=t.message,s.contacts=t.form.contacts,s.title=t.form.title,s.is_batch=!1),console.log("fonemessages",s),t.$store.dispatch("createLog",s).then(function(e){e.data.success?(t.$message({type:"success",message:"Message Sent"}),t.$store.dispatch("getFoneMessengers",{cache:!1}),t.$store.dispatch("getBalance"),t.close()):t.$message({type:"error",message:e.data.response.message}),t.loading=!1}).catch(function(e){t.loading=!1;e.response;t.$message({message:"Failed to send message. Please try again",type:"error"})})}else t.loading=!1,t.$message({message:"Please correct the errors",type:"error"})})}},computed:n()({},Object(i.b)({state:"fileState",file:"file"}),{fileUploading:function(){return"LOADING"===this.state}})}),u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"custom-class":"export-dialog",title:"New Message",visible:e.modalVisible,width:"35%"},on:{close:e.close}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.fileUploading,expression:"fileUploading"}],staticClass:"flex justify-content-center new-export-bg"},[s("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{"hide-required-asterisk":"",size:"mini",rules:e.rules,model:e.form,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"Type Of Message"}},[s("el-select",{model:{value:e.form.is_batch,callback:function(t){e.$set(e.form,"is_batch",t)},expression:"form.is_batch"}},e._l(e.options,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),e.form.is_batch?s("div",[s("el-form-item",{attrs:{label:"Upload CSV File"}},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"","on-change":e.onChange,limit:1,"auto-upload":!1,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","file-list":e.fileList}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("Click to upload")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"Download File Format"}},[s("a",{attrs:{download:"",href:"../../../static/Batch_messages_format.csv"}},[e._v("Download file format")])])],1):s("div",[s("el-form-item",{attrs:{label:"Title Of Message"}},[s("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Phone Number(s)"}},[e._l(e.form.contacts,function(t){return s("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(s){return e.handleClose(t)}}},[e._v("\n                        "+e._s(t)+"\n                        ")])}),e._v(" "),e.inputVisible?s("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Number")])],2),e._v(" "),s("el-form-item",{attrs:{label:"Message"}},[s("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),s("p",{staticClass:"cha-info"},[e._v(e._s(e.characters)+" characters "+e._s(e.messages)+" messages")])],1)],1),e._v(" "),s("el-form-item",[s("div",{staticClass:"flex justify-content-end w-100"},[s("el-button",{attrs:{type:"text"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.createLog("form")}}},[e._v("Create")])],1)])],1)],1)])},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(e){s("t/GA")},"data-v-01775e02",null).exports,p={name:"TopupAccount",props:["modalVisible"],data:function(){return{checkAll:!1,topupoption:"flopay",form:{currency:"ghs"},options:[{name:"Flopay Wallet",value:"flopay"},{name:"External Wallet",value:"external"}],rules:{amount:[{required:!0,message:"This field is required",trigger:"blur"}]},loading:!1}},methods:{close:function(){o.a.$emit("topupModal",!1)},createLog:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){if(e){var s="",a={};"flopay"===t.topupoption?(s="v1/ova/topup",a=t.form):(s="v1/ova/wallet/topup",a=n()({},t.form,{country_code:"GH",service_code:"cashout",live:!0})),t.$store.dispatch("topupOVA",{url:s,ova:a}).then(function(e){e.data.success?(t.$message({type:"success",message:e.data.response.message}),t.$store.dispatch("getBalance"),t.$store.dispatch("getFoneMessengers",{cache:!1}),t.close()):t.$message({type:"error",message:e.data.response.message}),t.loading=!1}).catch(function(e){t.loading=!1;var s=e.response;t.$message({message:s.data.error,type:"error"})})}else t.loading=!1,t.$message({message:"Please correct the errors",type:"error"})})}},computed:n()({},Object(i.b)({providers:"providers"}))},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"custom-class":"export-dialog",title:"Top-Up OVA",visible:e.modalVisible,width:"35%"},on:{close:e.close}},[s("div",{staticClass:"flex justify-content-center new-export-bg"},[s("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{"hide-required-asterisk":"",size:"mini",rules:e.rules,model:e.form,"label-width":"150px"}},[s("el-form-item",{attrs:{label:"Topup Type"}},[s("el-select",{staticClass:"w-75",model:{value:e.topupoption,callback:function(t){e.topupoption=t},expression:"topupoption"}},e._l(e.options,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"Amount",prop:"amount"}},[s("el-input",{staticClass:"w-75",model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}},[s("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("GHs")])])],1),e._v(" "),"external"===e.topupoption?s("div",[s("el-form-item",{attrs:{label:"Provider"}},[s("el-select",{staticClass:"w-75",model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}},e._l(e.providers,function(e,t){return s("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"Phone",prop:"phone"}},[s("el-input",{staticClass:" w-75",model:{value:e.form.customer_no,callback:function(t){e.$set(e.form,"customer_no",t)},expression:"form.customer_no"}})],1),e._v(" "),"vodafone"===e.form.provider?s("el-form-item",{attrs:{label:"Voucher"}},[s("el-input",{staticClass:" w-75",model:{value:e.form.voucher,callback:function(t){e.$set(e.form,"voucher",t)},expression:"form.voucher"}})],1):e._e()],1):e._e(),e._v(" "),s("el-form-item",[s("div",{staticClass:"flex justify-content-end w-100"},[s("el-button",{attrs:{type:"text"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.createLog("form")}}},[e._v("Create")])],1)])],1)],1)])},staticRenderFns:[]};var f={name:"Sms",props:["type"],components:{LogDialog:d,TopupAccount:s("VU/8")(p,m,!1,function(e){s("MiKv")},"data-v-7cca350c",null).exports},data:function(){return{test:!0,columns:[{label:"message id",dataField:"response_id",align:"center",width:"270"},{label:"network",dataField:"network_provider",align:"center",width:"100"},{label:"recipient",dataField:"recipient_no",align:"left",width:"auto"}],logDialog:!1,topupDialog:!1,styleObject:{fontSize:"12px"},loadingRx:!1,loadingRetry:!1,search:"",icon:"el-icon-search",form:{is_batch:!1,contacts:[]}}},created:function(){this.$store.dispatch("getFoneMessengers")},mounted:function(){var e=this;o.a.$emit("sideNavClick","fonemessenger"),o.a.$on("logModal",function(){e.logDialog=!1}),o.a.$on("topupModal",function(){e.topupDialog=!1})},beforeDestroy:function(){var e=this;o.a.$off("logModal",function(){e.logDialog=!1})},methods:{handleCurrentChange:function(e){this.$store.dispatch("getFoneMessengers",{page:e,cache:!1})},clickRow:function(e,t,s){this.$refs.fone.toggleRowExpansion(e)},fetchMessages:function(){this.$store.dispatch("getFoneMessengers",{cache:!1})},topUpAccount:function(){},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$store.dispatch("createTransactions",t.form).then(function(e){t.$message({message:"Payment successful",type:"success"})})})},resetForm:function(e){this.$refs[e].resetFields()},searchButton:function(){var e=this;this.icon="el-icon-loading",this.$store.dispatch("getFoneMessengers",{cache:!1,search_value:this.search}).then(function(){e.icon="el-icon-search"})},createLog:function(e){var t=this;this.loadingRx=!0,"single"!==e.post_type?(this.form.file_url="",this.form.is_batch=!0):(this.form.message=e.message,this.form.contacts.push(e.recipient_no),this.form.title="Message",this.form.is_batch=!1),this.$store.dispatch("createLog",this.form).then(function(e){e.data.success?(t.$message({type:"success",message:"Message Sent"}),t.$store.dispatch("getFoneMessengers",{cache:!1}),t.$store.dispatch("getBalance"),t.loadingRx=!1):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){t.loadingRx=!1;e.response;t.$message({message:"Failed to send message. Please try again",type:"error"})})},repostLog:function(e){var t=this;this.loadingRetry=!0,this.form.sms_id=e.response_id,this.form.is_repost=!0,"single"!==e.post_type?(this.form.file_url="",this.form.is_batch=!0):(this.form.message=e.message,this.form.contacts.push(e.recipient_no),this.form.title="Message",this.form.is_batch=!1),this.$store.dispatch("createLog",this.form).then(function(e){e.data.success?(t.$message({type:"success",message:"Message reposted successfully"}),t.$store.dispatch("getFoneMessengers",{cache:!1}),t.$store.dispatch("getBalance"),t.loadingRetry=!1):(t.$message({type:"error",message:e.data.response.message}),t.loadingRetry=!1)}).catch(function(e){t.loadingRetry=!1;e.response;t.$message({message:"Failed to repost message. Please try again",type:"error"})})}},computed:n()({},Object(i.b)({messages:"messages",state:"messagesState",meta:"messagesMeta",providers:"providers",pageSize:"pageSize",balance:"balance"}),{error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},loading:function(){return"LOADING"===this.state},total:function(){return this.meta.total}})},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"card-0"},[s("div",{staticClass:"transactions"},[s("div",{staticClass:"trans-div flex justify-content-between"},[s("div",{staticClass:"flex align-items-baseline"},[s("filter-component",{attrs:{dispatch:"setFoneFilters",filterType:"fone"}})],1),e._v(" "),s("div",{staticClass:"search_n_roles flex w-50"},[s("el-input",{staticClass:"search-div mr-2",attrs:{"prefix-icon":e.icon,clearable:"",size:"mini",placeholder:"Search phone number"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchButton(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),s("div",{staticClass:"flex align-items-center"},[s("p",{staticClass:"balance-info gray-text border-right"},[e._v(e._s(e._f("money")(e.balance.fon_messanger_balance)))]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Refresh",placement:"top"}},[s("el-button",{attrs:{icon:"undo icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchMessages(t)}}})],1),e._v(" "),s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(t){e.topupDialog=!0}}},[s("i",{staticClass:"plus icon"}),e._v(" Topup")]),e._v(" "),s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(t){e.logDialog=!0}}},[s("i",{staticClass:"plus icon"}),e._v(" New")])],1)]),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchMessages(t)}}},[e._v("Retry")])],1)]):s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingRetry,expression:"loadingRetry"}]},[s("el-table",{ref:"fone",attrs:{"empty-text":"No fone messengers to display","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.messages},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{type:"expand",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"pl-15 mb-2"},[s("p",{staticClass:"blue-text s-13 bold-600"},[e._v("Message: ")]),e._v(" "),s("p",{staticClass:"s-12 gray"},[e._v(e._s(t.row.message))])]),e._v(" "),t.row.reposted_logs.length>0?s("el-card",{staticClass:"pb-5"},[s("el-table",{ref:"reposted",attrs:{"empty-text":"No reposted message logs","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:t.row.reposted_logs}},[s("el-table-column",{attrs:{type:"expand",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"pl-15"},[s("p",{staticClass:"blue-text s-13 bold-600"},[e._v("Message: ")]),e._v(" "),s("p",{staticClass:"s-12 gray"},[e._v(e._s(t.row.message))])])]}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{prop:"delivery_status",label:"delivery status",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex justify-content-between"},["DELIVERED"===t.row.delivery_status||"Message delivered to handset"===t.row.delivery_status?s("the-tag",{attrs:{status:"success",title:"DELIVERED"}}):"REPOSETED"==t.row.delivery_status?s("the-tag",{attrs:{status:"success",title:"REPOSETED"}}):null===t.row.delivery_status?s("the-tag",{attrs:{status:"failed",title:"pending"}}):s("the-tag",{attrs:{status:"failed",title:t.row.delivery_status}}),e._v(" "),"DELIVERED"==t.row.delivery_status||"Message delivered to handset"==t.row.delivery_status||"REPOSETED"==t.row.delivery_status?s("div"):s("div",[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Resend SMS",placement:"top"}},[s("el-button",{staticClass:"p-0",attrs:{type:"text",icon:"undo icon",loading:e.loadingRx},on:{click:function(s){return e.repostLog(t.row)}}})],1)],1)],1)]}}],null,!0)}),e._v(" "),e._l(e.columns,function(e,t){return s("el-table-column",{key:t,attrs:{"show-overflow-tooltip":"",prop:e.dataField,label:e.label,width:e.width}})}),e._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"Sent At",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                          "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                                      ")]}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"Delivered At",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.callback_data?s("div",[s("span",{staticClass:"bold-600"},[e._v(e._s(e._f("moment")(t.row.callback_data.createdAt,"D MMM,YY hh:mm A")))])]):s("div",[e._v("\n                                          N/A\n                                        ")])]}}],null,!0)})],2)],1):e._e()]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"delivery_status",label:"delivery status",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex justify-content-between"},["DELIVERED"===t.row.delivery_status||"Message delivered to handset"===t.row.delivery_status?s("the-tag",{attrs:{status:"success",title:"DELIVERED"}}):"REPOSETED"==t.row.delivery_status?s("the-tag",{attrs:{status:"success",title:"REPOSETED"}}):null===t.row.delivery_status?s("the-tag",{attrs:{status:"failed",title:"pending"}}):s("the-tag",{attrs:{status:"failed",title:t.row.delivery_status}}),e._v(" "),"DELIVERED"==t.row.delivery_status||"Message delivered to handset"==t.row.delivery_status||"REPOSETED"==t.row.delivery_status?s("div"):s("div",[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Resend SMS",placement:"top"}},[s("el-button",{staticClass:"p-0",attrs:{type:"text",icon:"undo icon",loading:e.loadingRx},on:{click:function(s){return e.repostLog(t.row)}}})],1)],1)],1)]}}])}),e._v(" "),e._l(e.columns,function(e,t){return s("el-table-column",{key:t,attrs:{"show-overflow-tooltip":"",prop:e.dataField,label:e.label,width:e.width}})}),e._v(" "),s("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},[s("the-tag",{attrs:{status:"failed",title:e.row.post_type}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"Sent At",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"Delivered At",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.callback_data?s("div",[s("span",{staticClass:"bold-600"},[e._v(e._s(e._f("moment")(t.row.callback_data.createdAt,"D MMM,YY hh:mm A")))])]):s("div",[e._v("\n                            N/A\n                          ")])]}}])})],2),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-10"},[s("div",{staticClass:"s-12"},[s("span",{staticClass:"bold-600"},[e._v(e._s(e.messages.length))]),e._v(" results of "),s("span",{staticClass:"bold-600"},[e._v(e._s(e.total))])]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])]),e._v(" "),s("log-dialog",{attrs:{modalVisible:e.logDialog}}),e._v(" "),s("topup-account",{attrs:{modalVisible:e.topupDialog}})],1)},staticRenderFns:[]};var v=s("VU/8")(f,h,!1,function(e){s("cvwA")},"data-v-13edc138",null);t.default=v.exports},"5L6d":function(e,t){},AUMF:function(e,t){},CBkx:function(e,t){},EAsj:function(e,t){},J7yy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),o=s("bOdI"),i=s.n(o),r=s("Usg1"),l=s("NYxO"),c=s("Y+wi"),u=s("PJh5"),d=s.n(u),p={name:"USSD",props:["type"],data:function(){return i()({icon:"el-icon-search",test:!0,columns:[{label:"year",dataField:"year",align:"left",width:"auto"},{label:"index no",dataField:"index_no",align:"left",width:"auto"}],page:1,logDialog:!1,topupDialog:!1,exportVisible:!1,styleObject:{fontSize:"12px"},ready:!1,expanded:!1,search:"",value:"all",all:"all exams types",filter:{name:""},filteredExamsTypes:[{name:"B.E.C.E",code:"01"},{name:"W.A.S.C.E",code:"02"}],form:{from:"",to:""}},"ready",!1)},mounted:function(){var e=this;this.$store.dispatch("getUssdSessions"),r.a.$emit("sideNavClick","ussd"),r.a.$on("exportModal",function(t){e.exportVisible=!1})},methods:{filterHandler:function(e,t,s){return t[s.property].toLowerCase()===e.toLowerCase()},handleCurrentChange:function(e){this.$store.dispatch("getUssdSessions",{page:e,cache:!1})},clickRow:function(e,t,s){this.$router.push("/ussd/"+e.extra_data.sessionId)},fetchMessages:function(){this.$store.dispatch("getUssdSessions",{cache:!1})},searchButton:function(){var e=this;this.icon="el-icon-loading",setTimeout(function(){e.$message({type:"success",message:"Server-side search to be completed soon"}),e.icon="el-icon-search"},3e3)},filterByName:function(e){this.filter.name=e},topUpAccount:function(){},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("Error generating report"),!1;t.$store.dispatch("createUssdReport",t.form).then(function(e){t.$message({message:"Report Generation succeeded",type:"success"})})})},resetForm:function(e){this.$refs[e].resetFields()},generateReport:function(){this.exportVisible=!0},close:function(){this.form={from:"",to:""},this.exportVisible=!1,this.ready=!1},reset:function(){this.exportVisible=!1,this.ready=!1},dateRangeClicked:function(){}},computed:n()({},Object(l.b)({ussds:"ussdSessions",state:"ussdSessionsState",meta:"ussdSessionsMeta",pageSize:"pageSize",currentUssdSession:"currentUssdSession",fields:"fields",link:"downloadLink",token:"token",user:"user"}),{filteredSmsLogs:function(){var e=new Array;return this.ussds.map(function(t){t.extra_data.type&&e.push(t)}),console.log("arr:",e),e},filteredPins:function(){var e=new Array;return this.ussds.map(function(t){var s=t.extra_data.type;""!==s&&null!=s&&"N/A"!==s||e.push(t)}),e},total:function(){return this.meta.total},pageSize:function(){return this.meta.limit},error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},loading:function(){return"LOADING"===this.state},currentUssd:function(){return this.currentUssdSession},dateColumns:{get:function(){return[this.form.from,this.form.to]},set:function(e){this.form.from=d()(e[0]).format("YYYY-MM-DD"),this.form.to=d()(e[1]).format("YYYY-MM-DD")}},generateQueryParams:function(){return console.log("Query Params:",c.a.createExportQuery(this.form)),c.a.createExportQuery(this.form)}})},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-tabs",{staticClass:"default-tab",class:[{"test-data":e.test},"position-relative"],attrs:{stretch:"",type:"border-card"}},[s("el-tab-pane",{attrs:{label:"PINS"}},[s("el-card",{staticClass:"card-0"},[s("div",{staticClass:"transactions"},[s("div",{staticClass:"trans-div flex justify-content-between"},[s("div",{staticClass:"search_n_roles flex justify-content-between w-50"},[s("filter-component",{attrs:{dispatch:"setUssdFilters",filterType:"ussd"}}),e._v(" "),s("el-input",{staticClass:"search-div mr-2",staticStyle:{width:"70%"},attrs:{"prefix-icon":e.icon,size:"mini",placeholder:"Search phone number"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchButton(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),s("div",{staticClass:"flex align-items-center"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Refresh",placement:"top"}},[s("el-button",{attrs:{icon:"undo icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchMessages(t)}}})],1),e._v(" "),s("el-button",{directives:[{name:"can",rawName:"v-can",value:"Generate Reports",expression:"'Generate Reports'"}],staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:e.generateReport}},[s("i",{staticClass:"download icon"}),e._v("Export\n                      ")])],1)]),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchMessages(t)}}},[e._v("Retry")])],1)]):s("div",{staticClass:"ussd_session"},[s("el-table",{ref:"fone",attrs:{"empty-text":"No ussd session available today","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.filteredPins.filter(function(t){return!e.search||t.receiver_no.toLowerCase().includes(e.search.toLowerCase())}).slice(12*e.page-12,12*e.page)},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{type:"index"}}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"extra_data.sessionId",label:"session id"}}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"receiver_no",label:"phone number"}}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"provider_code",label:"network",width:"auto","label-class-name":"text-uppercase"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                              "+e._s(t.row.provider_code)+"\n                            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"transaction",label:"Payment status",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},["paid"===e.row.status?s("the-tag",{attrs:{status:"success",title:e.row.status,icon:"detail check icon"}}):s("the-tag",{attrs:{status:"failed",title:e.row.status,icon:"reply icon"}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"updated_at",label:"Timestamp",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                "+e._s(e._f("moment")(t.row.updated_at,"D MMM,YY hh:mm:ss A"))+"\n                              ")]}}])})],1),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-10"},[s("div",{staticClass:"s-12"},[e._v("\n                            "+e._s(this.filteredPins.slice(12*e.page-12,12*e.page).length)+" results\n                          ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])]),e._v(" "),s("el-dialog",{attrs:{"custom-class":"export-dialog",title:"Export",visible:e.exportVisible,width:"25%"}},[s("div",{staticClass:"flex justify-content-center new-export-bg "},[s("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{"hide-required-asterisk":"",size:"mini",model:e.form,"label-position":"top"}},[s("el-form-item",{attrs:{label:"Select Date"}},[s("el-date-picker",{attrs:{type:"daterange","start-placeholder":"Start date","end-placeholder":"End date"},on:{change:e.dateRangeClicked},model:{value:e.dateColumns,callback:function(t){e.dateColumns=t},expression:"dateColumns"}})],1),e._v(" "),s("el-form-item",{staticClass:"flex justify-content-end"},[s("div",{staticClass:"flex"},[s("el-button",{on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("a",{staticClass:"cursor open-sans el-button el-button--primary el-button--mini",attrs:{href:"https://ussd-log-status.nfortics.com/reports/index?"+e.generateQueryParams,target:"_blank",download:""},on:{click:e.close}},[e._v("Download")])],1)])],1)],1)])],1)],1),e._v(" "),s("el-tab-pane",{attrs:{label:"SMS Results"}},[s("el-card",{staticClass:"card-0"},[s("div",{staticClass:"transactions"},[s("div",{staticClass:"trans-div flex justify-content-between"},[s("div",{staticClass:"search_n_roles flex justify-content-between w-50"},[s("filter-component",{attrs:{dispatch:"setUssdFilters",filterType:"ussd"}}),e._v(" "),s("el-input",{staticClass:"search-div mr-2",staticStyle:{width:"70%"},attrs:{"prefix-icon":e.icon,size:"mini",placeholder:"Search phone or index number"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchButton(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),s("div",{staticClass:"flex align-items-center"},[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Refresh",placement:"top"}},[s("el-button",{attrs:{icon:"undo icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchMessages(t)}}})],1),e._v(" "),s("el-button",{directives:[{name:"can",rawName:"v-can",value:"Generate Reports",expression:"'Generate Reports'"}],staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:e.generateReport}},[s("i",{staticClass:"download icon"}),e._v("Export\n                      ")])],1)]),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchMessages(t)}}},[e._v("Retry")])],1)]):s("div",{staticClass:"ussd_session"},[s("el-table",{ref:"fone",attrs:{"empty-text":"No ussd session available today","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.filteredSmsLogs.filter(function(t){return!e.search||t.receiver_no.toLowerCase().includes(e.search.toLowerCase())||t.extra_data.index_no.toLowerCase().includes(e.search.toLowerCase())}).slice(12*e.page-12,12*e.page)},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{type:"index"}}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"extra_data.sessionId",label:"session id"}}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"receiver_no",label:"phone number"}}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"extra_data.type",label:"exams type",filters:[{text:"BECE",value:"bece"},{text:"WASSCE",value:"wassce"}],"filter-method":e.filterHandler},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                              "+e._s(t.row.extra_data.type||"N/A")+"\n                            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"extra_data.year",label:"year",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                              "+e._s(t.row.extra_data.year||"N/A")+"\n                            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"extra_data.index_no",label:"index no",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                              "+e._s(t.row.extra_data.index_no||"N/A")+"\n                            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"status",label:"Payment status",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},["paid"===e.row.status?s("the-tag",{attrs:{status:"success",title:e.row.status,icon:"detail check icon"}}):s("the-tag",{attrs:{status:"failed",title:e.row.status,icon:"reply icon"}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"updated_at",label:"Timestamp",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                "+e._s(e._f("moment")(t.row.updated_at,"D MMM,YY hh:mm:ss A"))+"\n                              ")]}}])})],1),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-10"},[s("div",{staticClass:"s-12"},[e._v("\n                            "+e._s(this.filteredSmsLogs.slice(12*e.page-12,12*e.page).length)+" results\n                          ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])]),e._v(" "),s("el-dialog",{attrs:{"custom-class":"export-dialog",title:"Export",visible:e.exportVisible,width:"25%"}},[s("div",{staticClass:"flex justify-content-center new-export-bg "},[s("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{"hide-required-asterisk":"",size:"mini",model:e.form,"label-position":"top"}},[s("el-form-item",{attrs:{label:"Select Date"}},[s("el-date-picker",{attrs:{type:"daterange","start-placeholder":"Start date","end-placeholder":"End date"},on:{change:e.dateRangeClicked},model:{value:e.dateColumns,callback:function(t){e.dateColumns=t},expression:"dateColumns"}})],1),e._v(" "),s("el-form-item",{staticClass:"flex justify-content-end"},[s("div",{staticClass:"flex"},[s("el-button",{on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("a",{staticClass:"cursor open-sans el-button el-button--primary el-button--mini",attrs:{href:"https://ussd-log-status.nfortics.com/reports/index?"+e.generateQueryParams,target:"_blank",download:""},on:{click:e.close}},[e._v("Download")])],1)])],1)],1)])],1)],1)],1)],1)},staticRenderFns:[]};var f=s("VU/8")(p,m,!1,function(e){s("5L6d")},"data-v-0e53ca23",null);t.default=f.exports},MiKv:function(e,t){},N0mj:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("Usg1"),s("NYxO");var a={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var n=s("VU/8")({name:"FeesDetails",data:function(){return{}},created:function(){},mounted:function(){},methods:{},computed:{}},a,!1,function(e){s("Uhet")},"data-v-a82baff2",null);t.default=n.exports},Uhet:function(e,t){},VCvx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),o=s("Usg1"),i=s("NYxO"),r={name:"Fees",data:function(){return{test:!0,columns:[{label:"Net",dataField:"type"},{label:"Amount",dataField:"customer"},{label:"Fee",dataField:"ref"}],styleObject:{fontSize:"12px"},exportVisible:!1}},created:function(){this.$store.dispatch("getFees")},mounted:function(){var e=this;o.a.$emit("sideNavClick","fees"),o.a.$on("exportModal",function(t){e.exportVisible=!1})},methods:{clickRow:function(e,t,s){this.$router.push("/payments/"+e.reference)},handleCurrentChange:function(e){this.$store.dispatch("getFees",{page:e,cache:!1})},fetchFees:function(){this.$store.dispatch("getFees",{cache:!1})}},computed:n()({},Object(i.b)({fees:"fees",meta:"feesMeta",state:"feesState",pageSize:"pageSize"}),{error:function(){return"ERROR"===this.state&&"LOADING"!==this.state},total:function(){return this.meta.trans},loading:function(){return"LOADING"===this.state},filteredFees:function(){return this.fees.map(function(e){return e.net_amount=e.receiver_amount-e.charged_amount,e})}})},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"card-0"},[s("div",{staticClass:"transactions"},[s("div",{staticClass:"trans-div flex justify-content-between"},[s("div",[s("filter-component",{attrs:{dispatch:"setFeesFilters",filterType:"payment"}})],1),e._v(" "),s("div",[s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button",attrs:{type:"text"},on:{click:function(t){e.exportVisible=!0}}},[s("i",{staticClass:"file alternate outline icon"}),e._v(" Export")])],1)]),e._v(" "),s("div",[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchFees(t)}}},[e._v("Retry")])],1)]):s("div",{staticClass:"breathe"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"empty-text":"No match found, filter desired period range","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.filteredFees},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{prop:"type",label:"Type"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",[e._v("Fee")])]}}])}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"reference",label:"Reference"}}),e._v(" "),s("el-table-column",{attrs:{label:"Net"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 s-13"},[e._v(e._s(e._f("money")(t.row.net_amount)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 s-13"},[e._v(e._s(e._f("money")(t.row.receiver_amount)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Fee"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 s-13"},[e._v(e._s(e._f("money")(t.row.charged_amount)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                        ")]}}])})],1),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-10"},[s("div",{staticClass:"s-12"},[s("span",{staticClass:"bold-600"},[e._v(e._s(e.fees.length))]),e._v(" results\n                    ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),s("export-modal",{attrs:{modalVisible:e.exportVisible},on:{"update:modalVisible":function(t){e.exportVisible=t},"update:modal-visible":function(t){e.exportVisible=t}}})],1)])},staticRenderFns:[]};var c=s("VU/8")(r,l,!1,function(e){s("Wy4T")},"data-v-64d818f9",null);t.default=c.exports},"WY9/":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"FirstTimeLogin",data:function(){return{form:{email:"",current_password:"",password:""},loading:!1,type:"password",current_type:"password",rules:{email:[{required:!0,message:"Please input email",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"}],current_password:[{required:!0,message:"Please input password",trigger:"blur"}]}}},mounted:function(){},methods:{changePassword:function(e){this.$route.query.token?(this.form.token=this.$route.query.token,this.makeRequest("resetPassword",e)):(localStorage.getItem("FTloginToken")?(this.form.token=localStorage.getItem("FTloginToken"),console.log("Form: ",this.form)):this.$message({message:"Password reset token not available",type:"error"}),this.makeRequest("resetPassword",e))},makeRequest:function(e,t){var s=this;this.loading=!0,this.$refs[t].validate(function(t){t?(console.log("Url to sent: ",e),s.$store.dispatch(""+e,s.form).then(function(e){e.data.success?(s.$message({message:e.data.response.message,type:"success"}),s.$session.has("client")?s.$store.dispatch("getToken").then(function(e){s.$session.set("token",e.data.access_token),s.$store.dispatch("setToken",e.data.access_token),s.$router.push("/")}):(s.$message({message:"Password reset successful, login with your new credentials",type:"success"}),s.$router.push("/login"))):s.$message({message:e.data.response.message,type:"error"}),s.loading=!1}).catch(function(e){s.loading=!1,s.$message({message:"Error. Please try again later",type:"error"})})):(s.loading=!1,s.$message({message:"Please fill out all the details",type:"error"}))})},showCurrentPassword:function(){this.current_type="password"===this.current_type?"text":"password"},showPassword:function(){this.type="password"===this.type?"text":"password"}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"center flex-column full-height"},[e._m(0),e._v(" "),s("div",{staticClass:"logo-div w-30 bg-white border-rounded"},[s("p",{staticClass:"text-center flopay-blue bold-500 s-16"},[e._v("Welcome. Please change your password")]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login("form")}}},[s("el-form-item",{attrs:{prop:"email"}},[s("el-input",{staticClass:"no-border-input",attrs:{placeholder:"Email",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"current_password"}},[s("el-input",{staticClass:"no-border-input",attrs:{placeholder:"Current Password",type:e.current_type},model:{value:e.form.current_password,callback:function(t){e.$set(e.form,"current_password",t)},expression:"form.current_password"}},[s("i",{staticClass:"el-input__icon eye icon",attrs:{slot:"suffix"},on:{click:e.showCurrentPassword},slot:"suffix"})])],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{staticClass:"no-border-input",attrs:{placeholder:"New Password",type:e.type},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[s("i",{staticClass:"el-input__icon eye icon",attrs:{slot:"suffix"},on:{click:e.showPassword},slot:"suffix"})])],1),e._v(" "),s("el-form-item",{staticClass:"my-2"},[s("el-button",{staticClass:"w-100",attrs:{loading:e.loading,type:"warning"},on:{click:function(t){return e.changePassword("form")}}},[e._v("Change Password")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"my-3 flex justify-content-center"},[t("img",{attrs:{src:s("AOy5"),alt:""}})])}]};var o=s("VU/8")(a,n,!1,function(e){s("AUMF")},"data-v-22b888f3",null);t.default=o.exports},Wy4T:function(e,t){},cvwA:function(e,t){},d99H:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),o=s("NYxO"),i=s("PJh5"),r=s.n(i),l=(s("i+v2"),s("SN8z"),{name:"Profile",data:function(){return{imageUrl:"",fileList:[],columns:[{label:"Client Name",type:"input",model:"full_name",subtext:"Enter your client name."},{label:"Client Till",type:"input",model:"code",editable:!0},{label:"Client Company",type:"input",model:"company_name",subtext:"Enter your company's name."},{label:"Phone Number",type:"input",model:"msisdn"},{label:"Email",type:"input",model:"email",subtext:"We also use email for avatar detection if no photo is uploaded."},{label:"Account Number (Optional)",type:"input",model:"bank_account_no",editable:!0},{label:"Bank Name",type:"input",model:"bank_name",editable:!0},{label:"Business Address",type:"input",model:"address"},{label:"City",type:"input",model:"city"}],setPassCol:[{label:"Current password",type:"password",model:"current_password",showPass:!1},{label:"New password",type:"password",model:"password",showPass:!1},{label:"Password confirmation",type:"password",model:"confirm_new",showPass:!1}],styleObject:{fontSize:"12px"},tableColumns:[{label:"name",prop:"name",align:"left"},{label:"account entry",prop:"account_entry",align:"left"},{label:"amount",prop:"money",align:"left"},{label:"limit",prop:"nlimit",align:"left"},{label:"date",prop:"date",align:"center"}],depositColumns:[{label:"name",prop:"name"},{label:"desciption",prop:"description"}],form:{},type:"password",passReset:{current_password:"",password:"",confirm_new:""},showPassword:!1,createLoading:!1,page:1}},computed:n()({},Object(o.b)(["user","permissions","pageSize"]),{services:function(){return this.user.account_services.map(function(e){return e.date=r()(e.created_at).format("D MMM,YY hh:mm A"),e.money="GHs "+e.amount,e.nlimit="GHs "+e.limit,e})},privileges:function(){return this.permissions},deposit:function(){return this.user.deposit_accounts}}),methods:{updateProfile:function(e){var t=this;this.form={is_verified_account:!0,country_code:"GH",name:this.user.client.full_name,company:this.user.client.company_name,client_msisdn:this.user.client.msisdn,email:this.user.client.email,city:this.user.client.city},this.createLoading=!0,this.$refs[e].validate(function(e){e?t.$store.dispatch("updateProfile",t.form).then(function(e){t.createLoading=!1,t.$message({message:"Profile Updated Successfully",type:"success"})}).catch(function(){t.createLoading=!1,t.$message({message:"Unable to update profile. Please try again later",type:"error"})}):(t.createLoading=!1,t.$message({message:"Please fill form correctly",type:"error"}))})},togglePassword:function(){this.type="password"===this.type?"text":"password"},changePassword:function(e){this.passReset.password!==this.passReset.confirm_new?this.$message({message:"New Password must match. Kindly check and try again",type:"error"}):this.$route.query.token?(this.form.token=this.$route.query.token,this.makeRequest("resetPassword",e)):(localStorage.getItem("FTloginToken")?this.form.token=localStorage.getItem("FTloginToken"):this.form.token=localStorage.getItem("token"),this.makeRequest("resetPassword",e))},makeRequest:function(e,t){var s=this;this.createLoading=!0,this.$refs[t].validate(function(t){t?s.$store.dispatch(""+e,s.passReset).then(function(e){e.data.success?(s.$message({message:e.data.response.message,type:"success"}),s.$session.has("client")?s.$store.dispatch("getToken").then(function(e){s.$session.set("token",e.data.access_token),s.$store.dispatch("setToken",e.data.access_token),s.$router.push("/")}):(s.$message({message:"Password Saved",type:"success"}),s.$router.push("/login"))):s.$message({message:e.data.response.message,type:"error"}),s.createLoading=!1}).catch(function(e){s.createLoading=!1,s.$message({message:"Error. Please try again later",type:"error"})}):(s.createLoading=!1,s.$message({message:"Please fill out all the details",type:"error"}))})},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},logout:function(){var e=this;this.$store.dispatch("logout").then(function(){e.$session.remove("client"),e.$session.remove("token"),e.$session.destroy(),e.$router.push("/login")})},handleCurrentChange:function(e){this.page=e},handlePictureCardPreview:function(e){this.imageUrl=e.url}}}),c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"my-2 card-0 custom"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Profile")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{type:"primary",size:"mini"},on:{click:e.logout}},[e._v("Sign Out")])],1),e._v(" "),s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{sm:16,lg:13}},[s("el-form",{ref:"form",staticClass:"transaction-form py-20",attrs:{"label-position":"left",size:"mini","hide-required-asterisk":"",model:e.user.client,"label-width":"200px"}},e._l(e.columns,function(t,a){return s("el-form-item",{key:a,attrs:{label:t.label}},["input"===t.type?s("el-input",{attrs:{disabled:t.editable},model:{value:e.user.client[t.model],callback:function(s){e.$set(e.user.client,t.model,s)},expression:"user.client[item.model]"}}):e._e(),e._v(" "),t.subtext?s("p",{staticClass:"my-1"},[s("span",{staticClass:"info s-12 pl-6"},[e._v(e._s(t.subtext))])]):e._e()],1)}),1)],1)],1)],1),e._v(" "),s("div",{staticClass:"el-card__footer flex justify-content-end"},[s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{size:"mini"}},[e._v("Cancel")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 b-0 bold-500 open-sans white-text",attrs:{size:"mini",loading:e.createLoading,type:"primary"},on:{click:function(t){return e.updateProfile("form")}}},[e._v("Update Client Profile")])],1)]),e._v(" "),s("el-card",{staticClass:"my-2 card-0 custom"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Password Settings")])]),e._v(" "),s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{sm:16,lg:13}},[s("el-form",{ref:"reset",staticClass:"transaction-form py-20",attrs:{"label-position":"left",size:"mini","hide-required-asterisk":"",model:e.passReset,"label-width":"200px"}},e._l(e.setPassCol,function(t,a){return s("el-form-item",{key:a,attrs:{label:t.label}},[s("el-input",{attrs:{type:e.type},model:{value:e.passReset[t.model],callback:function(s){e.$set(e.passReset,t.model,s)},expression:"passReset[item.model]"}},[s("i",{staticClass:"el-input__icon eye icon",attrs:{slot:"suffix"},on:{click:e.togglePassword},slot:"suffix"})])],1)}),1)],1)],1)],1),e._v(" "),s("div",{staticClass:"el-card__footer flex justify-content-end"},[s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{size:"mini"},on:{click:function(t){return e.$router.push("/forgot-password")}}},[e._v("Forgot Password?")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 b-0 bold-500 open-sans white-text",attrs:{size:"mini",loading:e.createLoading,type:"primary"},on:{click:function(t){return e.changePassword("reset")}}},[e._v("Save Password")])],1)]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Deposit Accounts")])]),e._v(" "),s("div",[s("el-table",{staticClass:"breathe",attrs:{data:e.deposit,"empty-text":"No services to display","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header"}},[e._l(e.depositColumns,function(e,t){return s("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),e._v(" "),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{placement:"left",width:"400","popper-class":"no-padding-popover",trigger:"hover"}},[s("div",[s("div",{staticClass:"flex justify-content-between p-10 border-bottom"},[s("p",{staticClass:"blue-text bold-600 s-14 m-0 p-0"},[e._v("Accounts")]),e._v(" "),s("the-tag",{attrs:{status:"failed",title:t.row.name,icon:"reply icon"}})],1),e._v(" "),s("div",{staticClass:"p-10"},[s("el-row",[s("el-col",{attrs:{span:12}},e._l(t.row.accounts.slice(0,t.row.accounts.length/2+1),function(t,a){return s("div",{key:a},[s("p",{staticClass:"s-12 py-5"},[e._v(e._s(t.name))])])}),0),e._v(" "),s("el-col",{attrs:{span:12}},e._l(t.row.accounts.slice(t.row.accounts.length/2+1,t.row.accounts.length),function(t,a){return s("div",{key:a},[s("p",{staticClass:"s-12 py-5"},[e._v(e._s(t.name))])])}),0)],1)],1)]),e._v(" "),s("el-button",{staticClass:"icon-only-button",attrs:{slot:"reference",icon:"info circle icon",type:"text"},slot:"reference"})],1)]}}])})],2),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-20"},[s("div",{staticClass:"s-12"},[e._v("\n                    "+e._s(e.deposit.length)+" results\n                ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.deposit.length},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),s("el-card",{staticClass:"my-2"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Privileges")])]),e._v(" "),s("div",[s("div",{staticClass:"flex"},[s("div",{staticClass:"w-50"},e._l(e.privileges.slice(0,e.privileges.length/2+1),function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1",attrs:{type:"flex",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-13"},[e._v(e._s(t.action))])]),e._v(" "),s("el-col",{attrs:{span:12}})],1)}),1),e._v(" "),s("div",{staticClass:"w-50"},e._l(e.privileges.slice(e.privileges.length/2+1,e.privileges.length),function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1",attrs:{type:"flex",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-12"},[e._v(e._s(t.action))])]),e._v(" "),s("el-col",{attrs:{span:12}})],1)}),1)])])]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Account Services")])]),e._v(" "),s("div",[s("el-table",{staticClass:"breathe",attrs:{data:e.services,"empty-text":"No services to display","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header"}},e._l(e.tableColumns,function(e,t){return s("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),1),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-20"},[s("div",{staticClass:"s-12"},[e._v("\n                    "+e._s(e.services.length)+" results\n                ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.services.length},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[]};var u=s("VU/8")(l,c,!1,function(e){s("EAsj")},null,null).exports,d={name:"AdminProfile",data:function(){return{columns:[{label:"Client Name",prop:"name"},{label:"Company Name",prop:"company"},{label:"Username",prop:"username"}]}},computed:n()({},Object(o.b)(["user"]),{form:{get:function(){return n()({},this.user,{name:this.user.firstname+" "+this.user.lastname})},set:function(e){this.user=e;e.name.split(" ");this.user.firstname=e[0],this.user.lastname=e[1]}}})},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"my-2 card-0 custom"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"header-text"},[e._v("Profile")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{type:"primary",size:"mini"}},[e._v("Sign Out")])],1),e._v(" "),s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{sm:16,lg:13}},[s("el-form",{ref:"form",staticClass:"transaction-form py-20",attrs:{"label-position":"left",size:"mini","hide-required-asterisk":"",model:e.client,"label-width":"200px"}},e._l(e.columns,function(t,a){return s("el-form-item",{key:a,attrs:{label:t.label}},[s("el-input",{model:{value:e.form[t.prop],callback:function(s){e.$set(e.form,t.prop,s)},expression:"form[item.prop]"}})],1)}),1)],1)],1)],1),e._v(" "),s("div",{staticClass:"el-card__footer flex justify-content-end"},[s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{size:"mini"}},[e._v("Cancel")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 b-0 bold-500 open-sans white-text",attrs:{size:"mini",type:"primary"}},[e._v("Save")])],1)])],1)},staticRenderFns:[]};var m={name:"Profile",components:{ClientProfile:u,AdminProfile:s("VU/8")(d,p,!1,function(e){s("hT/E")},null,null).exports},computed:n()({},Object(o.b)(["isAdmin"]))},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.isAdmin?t("div",[t("admin-profile")],1):t("div",[t("client-profile")],1)])},staticRenderFns:[]};var h=s("VU/8")(m,f,!1,function(e){s("CBkx")},null,null);t.default=h.exports},gKhm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),o=s("NYxO"),i=s("Usg1"),r=s("PJh5"),l=s.n(r),c={name:"UssdDetail",data:function(){return{icon:"",status:"failed",edit:!1,remarks:"",page:this.$route.path,loading:!1,ticketVisible:!1,columns:[{label:"Customer",dataField:"name",width:"auto"},{label:"Dispute Ref.",dataField:"ref",width:"auto"},{label:"Transaction Ref.",dataField:"trans_ref",width:"auto"},{label:"Date",dataField:"date",width:"auto"}],fonecolumns:[{label:"recipient",dataField:"recipient_no",align:"left"},{label:"network",dataField:"network_provider",align:"left"}],styleObject:{},log:{message:"",contacts:[],is_batch:!1,transaction_id:""}}},created:function(){i.a.$emit("sideNavClick","ussd")},mounted:function(){var e=this;this.$store.dispatch("getCurrentUssdSession",this.$route.params.id).then(function(t){e.$store.dispatch("getCurrentUssdSessionPayment",e.currentUssdSession[0].sessionid)}),i.a.$on("ticketModal",function(t){e.ticketVisible=t})},methods:{handleTableCommand:function(e,t){switch(e){case"edit":this.$router.push("payments/"+t.id);break;case"open":this.ticketVisible=!0,this.transaction=t}},fetchTransactions:function(){this.$store.dispatch("getUssdSessions")},refund:function(){var e=this;this.loading=!0,this.$store.dispatch("createRefund",this.form.reference).then(function(t){t.data.success?e.$message({type:"success",message:"Payment Refunded"}):e.$message({type:"error",message:t.data.response.message}),e.loading=!1}).catch(function(t){e.loading=!1;var s=t.response;e.$message({message:s.data.response.error_message,type:"error"})})},clickRow:function(e,t,s){this.$router.push("/events/"+e.id)},clickLogs:function(e,t,s){this.$router.push("/logs/"+e.id)},resendSMS:function(){var e=this;this.loading=!0,this.log.contacts.push(this.form.customer_no),this.log.message=this.form.extra_data.message,this.log.transaction_id=this.form.email_logs[0].transaction_id,console.log("SMS Log:",this.log),this.$store.dispatch("createLog",this.log).then(function(t){t.data.success?e.$message({type:"success",message:"Message sent successfully"}):e.$message({type:"success",message:"Message being processed"}),e.loading=!1}).catch(function(t){e.loading=!1;t.response;e.$message({message:"Failed to send message. Please try again",type:"error"})})}},computed:n()({},Object(o.b)({currentUssdSession:"currentUssdSession",form:"currentUssdSessionPayment",state:"ussdSessionsState",currentUssdSessionPayment:"currentUssdSessionPayment"}),{events:function(){return this.form.events},logs:function(){return this.form.logs},disputes:function(){return this.form.disputes.map(function(e){return e.date=l()(e.created_at).format("D MMM,YY hh:mm A"),e})},messages:function(){return this.form.extra_data.message||"N/A"},tableMessages:function(){return this.form.sms_logs},loadingPage:function(){return"LOADING"===this.state},error:function(){return"ERROR"===this.state},success:function(){return"paid"===this.status},data:function(){var e="GHs";return"GHs"===this.form.currency&&(e="GHs"),{name:this.form.company?this.form.company:"N/A","phone number":this.form.customer_no,reference:this.form.reference,amount:e+" "+this.form.amount,fee:e+" "+this.form.charged_amount,date:this.form.date,time:this.form.time,remarks:this.form.remarks?this.form.remarks:"-"}},data2:function(){return{"Exams Type":("BECE"===this.form.extra_data.type?"BECE(School)":"PBEC"===this.form.extra_data.type?"BECE(Private)":this.form.extra_data.type)||"N/A","Customer Name":this.form.extra_data.name||"NA","Index Number":this.form.extra_data.index_no,Year:this.form.extra_data.year}},hasNoData:function(){return void 0===this.form},header:function(){i.a.$emit("sideNavClick","ussd");return"Ussd"}})},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}]},[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("\n              Unable to load this page\n            ")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchTransactions(t)}}},[e._v("Retry")])],1)]):s("div",[s("el-card",{staticClass:"card-0 position-relative"},[s("div",{staticClass:"flex flex-column p-20"},[s("div",{staticClass:"flex justify-content-between align-items-baseline mb-1"},[s("div",{staticClass:"flex align-items-baseline"},[s("p",{staticClass:"blue-text s-24 m-0 p-0 bold-600"},[e._v(e._s(e._f("money")(e.form.amount)))])]),e._v(" "),s("div")]),e._v(" "),s("div",[s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button b-0",attrs:{size:"mini",plain:""},on:{click:function(t){e.ticketVisible=!0}}},[s("i",{staticClass:"plus icon"}),e._v(" Open Ticket")])],1)]),e._v(" "),s("div",{staticClass:"border-top px-20 py-10"},[s("div",{staticClass:"flex"},[s("div",["paid"==e.form.payment_status?s("i",{staticClass:"check circle s-12 icon green"}):s("i",{staticClass:"exclamation circle s-12 icon gray"})]),e._v(" "),s("div",{staticClass:"flex flex-column ml-1"},["paid"==e.form.payment_status?s("p",{staticClass:"light mb-1 s-13"},[e._v("Payment succeeded")]):s("p",{staticClass:"light mb-1 s-13"},[e._v("Payment failed")]),e._v(" "),s("p",{staticClass:"light mb-1 s-12 gray"},[e._v(e._s(e.form.date))])])])])]),e._v(" "),s("el-card",{staticClass:"my-2"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"blue-text bold-600 s-16 flex"},[s("div",{staticClass:"w-50"},[e._v("Payments Details")]),e._v(" "),s("div",{staticClass:"w-50"},[e._v("Customer Details")])])]),e._v(" "),s("div",[e.hasNoData?s("div",{staticClass:"center h-80"},[e._v("\n                    "+e._s(e.noData)+"\n                ")]):e._e(),e._v(" "),e.hasNoData?e._e():s("div",[s("div",{staticClass:"flex"},[s("div",{staticClass:"w-50"},e._l(e.data,function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1"},[s("el-col",{attrs:{span:8}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-14"},[e._v(e._s(a))])]),e._v(" "),s("el-col",{attrs:{span:16}},["date"===a?s("p",{},[e._v(e._s(e._f("moment")(t,"MMM Do, YYYY")))]):"message"===a?s("div",[e.edit?s("div",{staticClass:"flex"},[s("el-input",{staticClass:"mr-2 no-padding-input",attrs:{size:"mini"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}}),e._v(" "),s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button b-0",attrs:{size:"mini",plain:""},on:{click:function(t){e.edit=!1}}},[e._v("Cancel")]),e._v(" "),s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button b-0",attrs:{size:"mini",plain:""}},[e._v("Save")])],1):s("div",{staticClass:"flex align-items-center"},[s("p",{staticClass:" m-0 mr-6"},[e._v(e._s(t))])])]):s("p",{},[e._v(e._s(t))])])],1)}),1),e._v(" "),s("div",{staticClass:"w-50"},e._l(e.data2,function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1"},[s("el-col",{attrs:{span:8}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-14"},[e._v(e._s(a))])]),e._v(" "),s("el-col",{attrs:{span:6}},[s("p",{},"date"===a?[e._v(e._s(e._f("moment")(t,"MMM Do, YYYY")))]:[e._v(e._s(t))])])],1)}),1)])])])]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v("SMS Log")])]),e._v(" "),s("div",{staticClass:"flex justify-content-between"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"fone",attrs:{"empty-text":"No messages to display","row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header","default-expand-all":!0,data:e.tableMessages}},[s("el-table-column",{attrs:{type:"expand",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"pl-15"},[s("p",{staticClass:"blue-text s-13 bold-600"},[e._v("Message: ")]),e._v(" "),s("p",{staticClass:"s-12 gray"},[e._v(e._s(t.row.message))])])]}}])},[s("template",{slot:"label"},[s("el-botton",{attrs:{icon:"el-icon-caret-bottom"}})],1)],2),e._v(" "),s("el-table-column",{attrs:{prop:"delivery_status",label:"delivery status"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex justify-content-between"},[s("the-tag",{attrs:{status:t.row.delivery_status,title:t.row.delivery_status}}),e._v(" "),t.row.delivery_status!=e.success?s("div",[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Resend SMS",placement:"top"}},[s("el-button",{staticClass:"p-0",attrs:{type:"text",icon:"undo icon",loading:e.loading},on:{click:e.resendSMS}})],1)],1):e._e()],1)]}}])}),e._v(" "),e._l(e.fonecolumns,function(e,t){return s("el-table-column",{key:t,attrs:{"show-overflow-tooltip":"",prop:e.dataField,label:e.label}})}),e._v(" "),s("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},[s("the-tag",{attrs:{status:"failed",title:e.row.post_type}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"updated_at",label:"Date",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                      "+e._s(e._f("moment")(t.row.updated_at,"D MMM,YY hh:mm A"))+"\n                    ")]}}])})],2)],1)]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v("Session Details")])]),e._v(" "),s("div",[s("el-table",{attrs:{"empty-text":"No ussd session available for this session_Id","tooltip-effect":"light","header-row-class-name":"transactions-table-header","row-class-name":"transactions-table-body ussd_session",data:e.currentUssdSession}},[s("el-table-column",{attrs:{prop:"message",label:"Input",width:"200"}}),e._v(" "),s("el-table-column",{attrs:{prop:"response",label:"Response",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                              "+e._s(t.row.response)+"\n                            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"timestamp",label:"Timestamp",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                              "+e._s(e._f("moment")(t.row.timestamp,"D MMM,YY hh:mm:ss A"))+"\n                            ")]}}])})],1)],1)]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v("Payment Logs")])]),e._v(" "),s("div",[s("el-table",{attrs:{"empty-text":"No logs found","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.logs},on:{"row-click":e.clickLogs}},[s("el-table-column",{attrs:{label:"status",prop:"status",width:"150"}},[[s("p",{staticClass:"status bold-600"},[e._v("201 OK")])]],2),e._v(" "),s("el-table-column",{attrs:{label:"description",prop:"method",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex justify-content-start"},[s("p",{staticClass:"m-0 p-0 mr-10 bold-500 s-12 text-uppercase"},[e._v(e._s(t.row.method||"N/A"))]),e._v(" "),s("p",{staticClass:"m-0 p-0 mr-10 bold-500 s-12 text-lowercase"},[e._v(e._s(t.row.url||"n/a"))])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"date",prop:"created_at",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 bold-500 s-12"},[e._v(e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A")))])]}}])})],1)],1)]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v("Payment Events")])]),e._v(" "),s("div",[s("el-table",{attrs:{"empty-text":"No events found","row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.events},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{label:"id",prop:"id",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 bold-500 s-12 text-uppercase"},[e._v(e._s(t.row.id||"N/A"))])]}}])}),e._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"event",prop:"request"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 bold-500 s-12"},["paid"===t.row.request.transaction.status?s("span",[e._v("payment.succeeded")]):"pending"===t.row.request.transaction.status?s("span",[e._v("payment.pending")]):"failed"===t.row.request.transaction.status?s("span",[e._v(" payment.failed")]):s("span",[e._v(" payment.unknown")])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"date",prop:"created_at",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 bold-500 s-12"},[e._v(e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A")))])]}}])})],1)],1)]),e._v(" "),e.form.has_dispute?s("el-card",{staticClass:"my-2 card-0"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v("disputes")])]),e._v(" "),s("div",[s("el-table",{attrs:{"empty-text":"No disputes found","row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.disputes},on:{"row-click":e.clickRow}},[s("el-table-column",{attrs:{type:"index"}}),e._v(" "),s("el-table-column",{attrs:{prop:"amount",label:"Amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("p",{staticClass:"m-0 p-0 mr-10 bold-500 s-13"},[e._v(e._s(e._f("money")(t.row.amount)))])]}}],null,!1,627346710)}),e._v(" "),s("el-table-column",{attrs:{prop:"status",label:"",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},["resolved"===e.row.status?s("the-tag",{attrs:{status:"success",title:e.row.status,icon:"detail check icon"}}):"failed"===e.row.status?s("the-tag",{attrs:{status:"failed",title:e.row.status,icon:"close icon"}}):s("the-tag",{attrs:{status:"pending",title:e.row.status,icon:"reply icon"}})],1)]}}],null,!1,986818096)}),e._v(" "),e._l(e.columns,function(e,t){return s("el-table-column",{key:t,attrs:{"show-overflow-tooltip":"",width:e.width,prop:e.dataField,label:e.label}})})],2)],1)]):e._e()],1),e._v(" "),s("ticket-modal",{attrs:{transaction:e.currentUssdSessionPayment,ticketVisible:e.ticketVisible},on:{"update:ticketVisible":function(t){e.ticketVisible=t},"update:ticket-visible":function(t){e.ticketVisible=t}}})],1)},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(e){s("wCqN")},"data-v-9e53f692",null);t.default=d.exports},gZcy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("NYxO");var a={name:"Login",data:function(){return{form:{email:""},email:"",loading:!1,rules:{email:[{required:!0,message:"Please input email",trigger:"blur"}]}}},methods:{sendEmail:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){e?t.$store.dispatch("sendEmail",t.form.email).then(function(e){e.data.success?(t.$message({message:e.data.response.message,type:"success"}),setTimeout(function(){t.$router.push("/login")},2e3)):t.$message({message:e.data.response.message,type:"error"}),t.loading=!1}).catch(function(e){t.loading=!1,t.$message({message:"Error. Please try again later",type:"error"})}):(t.loading=!1,t.$message({message:"Please fill out all the details",type:"error"}))})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"center flex-column full-height"},[e._m(0),e._v(" "),s("div",{staticClass:"logo-div w-30 bg-white border-rounded"},[s("p",{staticClass:"text-center flopay-blue bold-500 s-16 m-0"},[e._v("Reset your password")]),e._v(" "),s("p",{staticClass:"text-center gray-text bold-500 s-13 my-1"},[e._v("Enter your email address and we will send you a link to reset your password.")]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login("form")}}},[s("el-form-item",{attrs:{prop:"email"}},[s("el-input",{staticClass:"no-border-input",attrs:{placeholder:"Enter your email address",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("el-form-item",{staticClass:"my-2"},[s("el-button",{staticClass:"w-100",attrs:{loading:e.loading,type:"warning"},on:{click:function(t){return e.sendEmail("form")}}},[e._v("Send password to reset email")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"my-3 flex justify-content-center"},[t("img",{attrs:{src:s("AOy5"),alt:""}})])}]};var o=s("VU/8")(a,n,!1,function(e){s("0eRG")},"data-v-30781b64",null);t.default=o.exports},"hT/E":function(e,t){},"t/GA":function(e,t){},wCqN:function(e,t){}});
//# sourceMappingURL=0.4d5ef4679c897bac247f.js.map