webpackJsonp([1],{"92CL":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),r=s("NYxO"),i=s("PJh5"),o=s.n(i),l=s("Usg1"),c=s("Y+wi"),u={name:"NewBranch",props:["modalVisible","title","options","action","callback","mode","form"],data:function(){return{loading:!1,inputVisible:!1,inputValue:"",rules:{name:[{required:!0,message:"This field is required",trigger:"blur"}]}}},methods:{close:function(){l.a.$emit("branchModal",!1)},handleClose:function(e){this.form.phone_numbers.splice(this.form.phone_numbers.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var e=this.inputValue;e&&this.form.phone_numbers.push(e),this.inputVisible=!1,this.inputValue=""},submitForm:function(e){var t=this;this.loading=!0;var s=n()({},this.form,{client_till:this.$route.params.id});this.$refs[e].validate(function(e){e?t.$store.dispatch(t.action,s).then(function(e){t.loading=!1,e.data.success?(t.close(),t.$message({type:"success",message:e.data.response.message}),t.$store.dispatch(t.callback,t.$route.params.id)):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){var s=e.response;t.$message({type:"error",message:s.data.error})}):(t.loading=!1,t.$message({type:"error",message:"Please correctly fill all fields"}))})},editBranch:function(e){var t=this;this.loading=!0;var s={client_till:this.$route.params.id,name:this.form.name,branch_code:this.form.branch_code,bank_account_no:this.form.bank_account_no,location:this.form.location,phone_numbers:this.form.phone_numbers};this.$refs[e].validate(function(e){e?t.$store.dispatch("editSingleAccountBranch",s).then(function(e){t.loading=!1,e.data.success?(t.$store.dispatch("getSingleAccountBranches",t.$route.params.id),t.$message({type:"success",message:e.data.response.message}),t.close()):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){t.loading=!1;var s=e.response;t.$message({type:"error",message:s.data.error})}):(t.loading=!1,t.$message({type:"error",message:"Please correctly fill all fields"}))})}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"custom-class":"export-dialog",title:e.title,visible:e.modalVisible,width:"35%"},on:{close:e.close}},[s("div",{staticClass:"flex justify-content-center new-export-bg"},[s("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{size:"mini",rules:e.rules,model:e.form,"label-width":"150px"}},e._l(e.options,function(t,a){return s("el-form-item",{key:a,attrs:{prop:t.prop,label:t.label}},["phone_numbers"===t.value?s("div",[e._l(e.form.phone_numbers,function(t){return s("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(s){e.handleClose(t)}}},[e._v("\n                        "+e._s(t)+"\n                    ")])}),e._v(" "),e.inputVisible?s("el-input",{ref:"saveTagInput",refInFor:!0,staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleInputConfirm(t):null}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Number")])],2):s("el-input",{model:{value:e.form[t.value],callback:function(s){e.$set(e.form,t.value,s)},expression:"form[item.value]"}})],1)}),1)],1),e._v(" "),s("div",{staticClass:"flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{size:"mini",loading:e.loading,type:"primary"},on:{click:function(t){"new"===e.mode?e.submitForm("form"):e.editBranch("form")}}},[e._v("Submit")])],1)])},staticRenderFns:[]};var m=s("VU/8")(u,d,!1,function(e){s("B1FG")},"data-v-1755233f",null).exports,p=s("fZjL"),h=s.n(p),f={name:"NewGroup",props:["modalVisible","title","form","mode"],data:function(){return{checkAll:!1,isIndeterminate:!0,columns:[{label:"Group Name",value:"name",prop:"name"},{label:"Description",value:"description",prop:"description"},{label:"Limit: GHÂ¢",value:"approval_limit",prop:"approval_limit"}],loading:!1,rules:{name:[{required:!0,message:"This field is required",trigger:"blur"}]}}},methods:{close:function(){l.a.$emit("groupModal",!1)},handleCheckAllChange:function(e){this.priv=e?this.privileges.map(function(e){return e.code}):[],this.isIndeterminate=!1},handleCheckedPrivilegesChange:function(e){var t=e.length;this.checkAll=t===this.privileges.length,this.isIndeterminate=t>0&&t<this.privileges.length},submitForm:function(e){var t=this;this.loading=!0;var s=n()({},this.form,{privileges:this.form.privileges.map(function(e){return e.code}),client_till:this.$route.params.id});this.$refs[e].validate(function(e){e?t.$store.dispatch("createSingleAccountGroup",s).then(function(e){t.loading=!1,e.data.success?(t.close(),t.$message({type:"success",message:e.data.response.message}),t.$store.dispatch("getSingleAccountUsers",t.$route.params.id)):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){var s=e.response;t.$message({type:"error",message:s.data.error})}):(t.loading=!1,t.$message({type:"error",message:"Please correctly fill all fields"}))})},editGroup:function(e){var t=this;this.loading=!0;var s={client_till:this.$route.params.id,name:this.form.name,privileges:this.form.privileges.map(function(e){return e.code}),description:this.form.description,approval_limit:this.form.approval_limit};this.$refs[e].validate(function(e){e?t.$store.dispatch("editSingleAccountGroup",{group:s,id:t.form.id}).then(function(e){t.loading=!1,e.data.success?(t.close(),t.$message({type:"success",message:e.data.response.message}),t.$store.dispatch("getSingleAccountUsers",t.$route.params.id)):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){t.loading=!1;var s=e.response;t.$message({type:"error",message:s.data.error})}):(t.loading=!1,t.$message({type:"error",message:"Please correctly fill all fields"}))})}},computed:n()({},Object(r.b)({privileges:"currentAccountPrivileges"}),{priv:{get:function(){return this.form.privileges.map(function(e){return e.code})},set:function(e){var t=this;console.log("priv",e);for(var s=[],a=function(a){r=t.privileges.find(function(t){return t.code===e[a]}),console.log("exists",r),h()(r).length>0&&s.push(r)},n=0;n<e.length;n++){var r;a(n)}this.form.privileges=s}}})},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"custom-class":"export-dialog",title:e.title,visible:e.modalVisible,width:"35%"},on:{close:e.close}},[s("div",{staticClass:"flex justify-content-center new-export-bg"},[s("el-form",{ref:"form",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{size:"mini",rules:e.rules,model:e.form,"label-width":"150px"}},[e._l(e.columns,function(t,a){return s("el-form-item",{key:a,attrs:{prop:t.prop,label:t.label}},[s("el-input",{model:{value:e.form[t.value],callback:function(s){e.$set(e.form,t.value,s)},expression:"form[item.value]"}})],1)}),e._v(" "),s("el-form-item",{staticClass:"my-2 privileges",attrs:{label:"Privileges"}},[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("Check all")]),e._v(" "),s("el-checkbox-group",{on:{change:e.handleCheckedPrivilegesChange},model:{value:e.priv,callback:function(t){e.priv=t},expression:"priv"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},e._l(e.privileges.slice(0,7),function(t,a){return s("el-checkbox",{key:a,staticClass:"no-margin-checkbox m-0",attrs:{label:t.code}},[e._v(e._s(t.action))])}),1),e._v(" "),s("el-col",{staticClass:"flex flex-column",attrs:{span:12}},e._l(e.privileges.slice(8,13),function(t,a){return s("el-checkbox",{key:a,staticClass:"no-margin-checkbox m-0",attrs:{label:t.code}},[e._v(e._s(t.action))])}),1)],1)],1)],1)],2)],1),e._v(" "),s("div",{staticClass:"flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{size:"mini",loading:e.loading,type:"primary"},on:{click:function(t){"new"===e.mode?e.submitForm("form"):e.editGroup("form")}}},[e._v("Submit")])],1)])},staticRenderFns:[]};var g=s("VU/8")(f,b,!1,function(e){s("uVE2")},"data-v-67840bae",null).exports,v={name:"NewUser",props:["modalVisible","title","groupId","userForm","mode"],data:function(){return{columns:[{label:"User Name",value:"name",prop:"name"},{label:"Phone Number",value:"msisdn",prop:"msisdn"},{label:"Email",value:"email",prop:"email"},{label:"Bank Account Number",value:"bank_account_no",prop:"bank_account_no"}],loading:!1,rules:{name:[{required:!0,message:"This field is required",trigger:"blur"}]}}},methods:{close:function(){l.a.$emit("userModal",!1)},submitForm:function(e){var t=this;this.loading=!0;var s=n()({},this.userForm,{client_till:this.$route.params.id,user_group_id:this.groupId});this.$refs[e].validate(function(e){e?t.$store.dispatch("createSingleAccountUser",s).then(function(e){t.loading=!1,e.data.success?(t.$store.dispatch("getSingleAccountUsers",t.$route.params.id),t.close(),t.$message({type:"success",message:e.data.response.message})):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){var s=e.response;t.$message({type:"error",message:s.data.error})}):(t.loading=!1,t.$message({type:"error",message:"Please correctly fill all fields"}))})},editUser:function(e){var t=this;this.loading=!0;var s={client_till:this.$route.params.id,name:this.userForm.name,email:this.userForm.email,branch_code:this.userForm.branch_code,branch_name:this.userForm.branch_name,msisdn:this.userForm.msisdn,role:"admin",bank_account_no:this.userForm.bank_account_no,use_branch_account:this.userForm.use_branch_account};this.$refs[e].validate(function(e){e?t.$store.dispatch("editSingleAccountUser",{user:s,id:t.userForm.id}).then(function(e){t.loading=!1,e.data.success?(t.close(),t.$message({type:"success",message:e.data.response.message}),t.$store.dispatch("getSingleAccountUsers",t.$route.params.id)):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){t.loading=!1;var s=e.response;t.$message({type:"error",message:s.data.error})}):(t.loading=!1,t.$message({type:"error",message:"Please correctly fill all fields"}))})}},computed:n()({},Object(r.b)({privileges:"currentAccountPrivileges",branches:"currentAccountBranches"}),{branch:{get:function(){var e=this;return this.branches.find(function(t){return t.name===e.userForm.branch_name})},set:function(e){this.userForm.branch_name=this.branches.find(function(t){return t.branch_code===e}).name,this.userForm.branch_code=this.branches.find(function(t){return t.branch_code===e}).code}}})},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{"custom-class":"user-dialog",title:e.title,visible:e.modalVisible,width:"35%"},on:{close:e.close}},[s("div",{staticClass:"flex justify-content-center new-export-bg"},[s("el-form",{ref:"userForm",staticClass:"transaction-form my-2",staticStyle:{width:"90%"},attrs:{size:"mini",rules:e.rules,model:e.userForm,"label-width":"150px"}},[e._l(e.columns,function(t,a){return s("el-form-item",{key:a,attrs:{label:t.label}},[s("el-input",{model:{value:e.userForm[t.value],callback:function(s){e.$set(e.userForm,t.value,s)},expression:"userForm[item.value]"}})],1)}),e._v(" "),s("el-form-item",{attrs:{label:"Use Branch Account"}},[s("el-switch",{model:{value:e.userForm.use_branch_account,callback:function(t){e.$set(e.userForm,"use_branch_account",t)},expression:"userForm.use_branch_account"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Branch"}},[s("el-select",{staticClass:"w-100",attrs:{filterable:"",clearable:""},model:{value:e.branch,callback:function(t){e.branch=t},expression:"branch"}},e._l(e.branches,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.branch_code}})}),1)],1)],2)],1),e._v(" "),s("div",{staticClass:"flex justify-content-end",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{size:"mini",loading:e.loading,type:"primary"},on:{click:function(t){"new"===e.mode?e.submitForm("userForm"):e.editUser("userForm")}}},[e._v("Submit")])],1)])},staticRenderFns:[]};var y={name:"UsersTable",props:["header"],components:{NewUser:s("VU/8")(v,_,!1,function(e){s("uShJ")},"data-v-35513ff4",null).exports,NewGroup:g},data:function(){return{groupVisible:!1,userVisible:!1,page:1,usersColumns:[{label:"User Name",prop:"name"},{label:"email",prop:"email"},{label:"Branch",prop:"branch_name"}],styleObject:{fontSize:"12px"},group:{privileges:[]},mode:"new",title:"New Group",emptyForm:{client_till:"",name:"",privileges:[],description:"",approval_limit:null},user:{privileges:[]},userMode:"new",userTitle:"New User",userEmptyForm:{client_till:"",name:"",email:"",branch_code:"",branch_name:"",msisdn:"",role:"admin",bank_account_no:"",use_branch_account:!1}}},methods:{handleCurrentChange:function(e){this.page=e},handleCommand:function(e,t){switch(e){case"add":this.addUser();break;case"edit":this.editGroup(t);break;case"delete":this.deleteUserGroup(t)}},handleUserCommand:function(e,t){switch(e){case"edit":this.editUser(t);break;case"delete":this.deleteUserClient(t.msisdn)}},addUser:function(){this.userVisible=!0,this.user=this.userEmptyForm,this.userMode="new",this.userTitle="New User"},editUser:function(e){this.userVisible=!0,this.user=e,this.userMode="edit",this.userTitle="Edit User"},addGroup:function(){this.groupVisible=!0,this.group=this.emptyForm,this.mode="new",this.title="New Group"},editGroup:function(e){this.groupVisible=!0,this.group=e,this.mode="edit",this.title="Edit Group"},deleteUserClient:function(e){var t=this;this.$confirm("This will permanently delete this user. Continue?","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(function(){t.$store.commit("setSingleAccountUsersState","LOADING");var s={client_till:t.$route.params.id,msisdn:e};t.$store.dispatch("deleteSingleAccountUser",s).then(function(e){t.$store.commit("setSingleAccountUsersState","DATA"),e.data.success?(t.$store.dispatch("getSingleAccountUsers",t.$route.params.id),t.$message({type:"success",message:e.data.response.message})):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){t.$store.commit("setSingleAccountUsersState","DATA");var s=e.response;t.$message({type:"error",message:s.data.error})})})},deleteUserGroup:function(e){var t=this;this.$confirm("This will permanently delete this group. Continue?","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(function(){t.$store.commit("setSingleAccountUsersState","LOADING");var s={client_till:t.$route.params.id,code:e.code};t.$store.dispatch("deleteSingleAccountGroup",s).then(function(e){t.$store.commit("setSingleAccountUsersState","DATA"),e.data.success?(t.$store.dispatch("getSingleAccountUsers",t.$route.params.id),t.$message({type:"success",message:e.data.response.message})):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){t.$store.commit("setSingleAccountUsersState","DATA");var s=e.response;t.$message({type:"error",message:s.data.error})})})},clickGroup:function(e,t,s){s.label&&this.$refs.group.toggleRowExpansion(e)}},mounted:function(){var e=this;l.a.$on("groupModal",function(t){e.groupVisible=!1}),l.a.$on("userModal",function(t){e.userVisible=!1})},beforeDestroy:function(){var e=this;l.a.$off("groupModal",function(t){e.groupVisible=!1}),l.a.$off("userModal",function(t){e.userVisible=!1})},computed:n()({},Object(r.b)({form:"currentAccount",branches:"currentAccountBranches",users:"currentAccountUsers",usersState:"currentAccountUsersState",privileges:"currentAccountPrivileges",pageSize:"pageSize"}),{noBranches:function(){return 0===this.branches.length},total:function(){return this.users.length},newUsers:function(){return this.users},usersLoading:function(){return"LOADING"===this.usersState}})},C={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"my-2 card-0"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v(e._s(e.header)+" Users")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{disabled:e.noBranches,plain:"",size:"mini",icon:"plus icon"},on:{click:e.addGroup}},[e._v("Add Group")])],1),e._v(" "),s("div",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.usersLoading,expression:"usersLoading"}],ref:"group",staticClass:"default-table-expanded breathe",attrs:{"empty-text":"No groups to display","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.newUsers.slice(12*e.page-12,12*e.page)},on:{"row-click":e.clickGroup}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-table",{attrs:{"row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:t.row.users,"empty-text":"No users under this group to display"}},[e._l(e.usersColumns,function(e,t){return s("el-table-column",{key:t,attrs:{width:e.width,label:e.label,prop:e.prop}})}),e._v(" "),s("el-table-column",{attrs:{label:"Balance",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                    "+e._s(e._f("money")(t.row.balance))+"\n                                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{width:"100px",prop:"status",label:""},scopedSlots:e._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},[e.row.is_active?s("the-tag",{attrs:{status:"failed",title:"Active",icon:"detail check icon"}}):s("the-tag",{attrs:{status:"success",title:"Inactive",icon:"reply icon"}})],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Created at",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                    "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{width:"50px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex justify-content-end"},[s("el-dropdown",{on:{command:function(s){return e.handleUserCommand(s,t.row)}}},[s("i",{staticClass:"ellipsis vertical icon m-0 blue-text cursor"}),e._v(" "),s("el-dropdown-menu",{staticClass:"w-200",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{disabled:""}},[s("div",{staticClass:"table-dropdown-header blue-text bold-600 text-uppercase"},[e._v("\n                                                        action\n                                                    ")])]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"edit"}},[e._v("Edit User")]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"delete"}},[e._v("Delete User")])],1)],1),e._v(" "),s("new-user",{attrs:{"group-id":t.row.id,title:"New User",modalVisible:e.userVisible}})],1)]}}])})],2)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"group",prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{label:"Number of Users",prop:"number_of_users"}}),e._v(" "),s("el-table-column",{attrs:{label:"Approval Limit"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("money")(t.row.approval_limit))+"\n                    ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Created At"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                    ")]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex justify-content-end"},[s("el-popover",{attrs:{placement:"left",width:"400","popper-class":"no-padding-popover",trigger:"click"}},[s("div",[s("div",{staticClass:"flex justify-content-between p-10 border-bottom"},[s("p",{staticClass:"blue-text bold-600 s-14 m-0 p-0"},[e._v("Group Type")]),e._v(" "),s("the-tag",{attrs:{status:"failed",title:t.row.name,icon:"reply icon"}})],1),e._v(" "),s("div",{staticClass:"p-10"},e._l(t.row.privileges,function(t,a){return s("div",{key:a},[s("p",{staticClass:"s-12 py-5"},[e._v(e._s(t.action))])])}))]),e._v(" "),s("el-button",{staticClass:"p-0",attrs:{slot:"reference",icon:"info circle icon",type:"text"},slot:"reference"})],1),e._v(" "),s("el-dropdown",{on:{command:function(s){return e.handleCommand(s,t.row)}}},[s("i",{staticClass:"ellipsis vertical icon m-0 blue-text cursor"}),e._v(" "),s("el-dropdown-menu",{staticClass:"w-200",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{disabled:""}},[s("div",{staticClass:"table-dropdown-header blue-text bold-600 text-uppercase"},[e._v("\n                                            action\n                                        ")])]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"add"}},[e._v("Add User")]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"edit"}},[e._v("Edit Group")]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"delete"}},[e._v("Delete Group")])],1)],1),e._v(" "),s("new-user",{attrs:{"group-id":t.row.id,title:e.userTitle,userForm:e.user,mode:e.userMode,modalVisible:e.userVisible}})],1)]}}])})],1),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-20"},[s("div",{staticClass:"s-12"},[e._v("\n                    "+e._s(e.users.slice(12*e.page-12,12*e.page).length)+" results\n                ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 p-0 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),s("new-group",{attrs:{form:e.group,mode:e.mode,title:e.title,modalVisible:e.groupVisible}})],1)},staticRenderFns:[]},w=s("VU/8")(y,C,!1,null,null,null).exports,x={name:"BranchesTable",props:["header"],components:{NewBranch:m},data:function(){return{form:{},mode:"new",emptyForm:{client_till:"",name:"",bank_account_no:"",location:"",phone_numbers:[],email:""},page:1,title:"New Branch",branchVisible:!1,styleObject:{fontSize:"12px"},branchesColumns:[{label:"Name",prop:"name"},{label:"Till Number",prop:"branch_code"},{label:"Bank Account Number",prop:"bank_account_no"}],branchOptions:[{label:"Name",value:"name",prop:"name"},{label:"Account Number",value:"bank_account_no",prop:"bank_account_no"},{label:"Phone Number",value:"phone_numbers",prop:"phone_numbers"},{label:"Email",value:"email",prop:"email"},{label:"Location",value:"location",prop:"location"}]}},mounted:function(){var e=this;l.a.$on("branchModal",function(t){e.branchVisible=!1})},beforeDestroy:function(){l.a.$off("branchModal")},computed:n()({},Object(r.b)({branches:"currentAccountBranches",branchesState:"currentAccountBranchesState",pageSize:"pageSize"}),{branchesLoading:function(){return"LOADING"===this.branchesState},total:function(){return this.branches.length}}),methods:{handleCommand:function(e,t){switch(e){case"edit":this.editBranch(t);break;case"delete":this.deleteBranch(t)}},handleCurrentChange:function(e){this.page=e},addBranch:function(){this.branchVisible=!0,this.form=this.emptyForm,this.mode="new",this.title="New Branch"},editBranch:function(e){this.branchVisible=!0,this.form=e,this.mode="edit",this.title="Edit Branch"},deleteBranch:function(e){var t=this,s={client_till:this.$route.params.id,branch_code:e.branch_code};this.$confirm("This will permanently delete this branch. Continue?","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(function(){t.$store.commit("setSingleAccountBranchesState","LOADING"),t.$store.dispatch("deleteSingleAccountBranch",s).then(function(e){t.$store.commit("setSingleAccountBranchesState","DATA"),e.data.success?(t.$store.dispatch("getSingleAccountBranches",t.$route.params.id),t.$message({type:"success",message:e.data.response.message})):t.$message({type:"error",message:e.data.response.message})}).catch(function(e){t.$store.commit("setSingleAccountBranchesState","DATA");var s=e.response;t.$message({type:"error",message:s.data.error})})})}}},$={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"my-2 card-0"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v(e._s(e.header)+" Branches")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{plain:"",size:"mini",icon:"plus icon"},on:{click:e.addBranch}},[e._v("Add Branch")])],1),e._v(" "),s("div",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.branchesLoading,expression:"branchesLoading"}],staticClass:"breathe",attrs:{"empty-text":"No branches","row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.branches.slice(12*e.page-12,12*e.page)}},[s("el-table-column",{attrs:{type:"index"}}),e._v(" "),e._l(e.branchesColumns,function(e,t){return s("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),e._v(" "),s("el-table-column",{attrs:{label:"Amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("money")(t.row.funds_allocated))+"\n                    ")]}}])}),e._v(" "),s("el-table-column",{attrs:{width:"55px",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex justify-content-end"},[s("el-dropdown",{on:{command:function(s){return e.handleCommand(s,t.row)}}},[s("i",{staticClass:"ellipsis vertical icon m-0 blue-text cursor"}),e._v(" "),s("el-dropdown-menu",{staticClass:"w-200",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{disabled:""}},[s("div",{staticClass:"table-dropdown-header blue-text bold-600 text-uppercase"},[e._v("\n                                            action\n                                        ")])]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"edit"}},[e._v("Edit Branch")]),e._v(" "),s("el-dropdown-item",{staticClass:"s-12",attrs:{command:"delete"}},[e._v("Delete Branch")])],1)],1)],1)]}}])})],2),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-20"},[s("div",{staticClass:"s-12"},[e._v("\n                    "+e._s(e.branches.slice(12*e.page-12,12*e.page).length)+" results\n                ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 p-0 flex justify-content-end",attrs:{"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),s("new-branch",{attrs:{mode:e.mode,form:e.form,title:e.title,action:"createSingleAccountBranch",options:e.branchOptions,callback:"getSingleAccountBranches",modalVisible:e.branchVisible}})],1)},staticRenderFns:[]},k={name:"AccountDetail",components:{BranchesTable:s("VU/8")(x,$,!1,null,null,null).exports,UsersTable:w,NewGroup:g,NewBranch:m},data:function(){return{servicesColumns:[{label:"Name",prop:"name"},{label:"Account Entry",prop:"account_entry"}],styleObject:{fontSize:"12px"},hasNoData:!1,page:1,countPerPage:5}},mounted:function(){this.fetchAccount(),l.a.$emit("sideNavClick","accounts")},beforeDestroy:function(){l.a.$off("branchModal")},methods:{fetchAccount:function(){this.$store.dispatch("getSingleAccount",this.$route.params.id),this.$store.dispatch("getSingleAccountUsers",this.$route.params.id),this.$store.dispatch("getSingleAccountBranches",this.$route.params.id),this.$store.dispatch("getPrivileges",this.$route.params.id)},handleCurrentChange:function(e){this.page=e,this.countPerPage=this.services.slice(5*e-5,5*e).length},viewTransactions:function(){this.$router.push("/payments")},addUser:function(e){},handleCommand:function(e,t){switch(e){case"add":this.addUser(t.id);break;case"delete":this.deleteJob(t.id)}}},computed:n()({},Object(r.b)({form:"currentAccount",state:"currentAccountState",branches:"currentAccountBranches",users:"currentAccountUsers",usersState:"currentAccountUsersState",branchesState:"currentAccountBranchesState",privileges:"currentAccountPrivileges",settings:"currentAccountSettings",pageSize:"pageSize"}),{services:function(){return this.form.services},noBranches:function(){return 0===this.branches.length},newUsers:function(){return this.users.map(function(e){return e.name=e.name.toLowerCase(),e.users.map(function(e){return e.name=e.name.toLowerCase(),e.branch_name=e.branch_name.toLowerCase(),e}),e})},error:function(){return"ERROR"===this.state},loadingPage:function(){return"LOADING"===this.state},usersLoading:function(){return"LOADING"===this.usersState},branchesLoading:function(){return"LOADING"===this.branchesState},header:function(){return c.a.capitalize(this.form.company)},total:function(){return this.services.length},data:function(){return"GHs"===this.form.currency&&"GHS",{company:this.form.company?this.form.company:"-",name:this.form.name,"phone number":this.form.msisdn,email:this.form.email,date:o()(this.form.created_at).format("MMM Do, YYYY"),time:o()(this.form.created_at).format("hh:mm a")}},data2:function(){return{"billing address":this.form.address?this.form.address:"-",city:this.form.city?this.form.city:"-","till number":this.form.code?this.form.code:"-","account code":this.form.account_code?this.form.account_code:"-","client type":this.form.client_type?this.form.client_type:"-","onboard type":this.form.onboard_type?this.form.onboard_type:"-"}}})},A={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}]},[e.error?s("div",{staticClass:"center h-80"},[s("div",{staticClass:"center flex-column"},[s("p",{staticClass:"m-0 p-0"},[e._v("Unable to load this page")]),e._v(" "),s("el-button",{attrs:{icon:"sync icon",type:"text"},on:{click:function(t){return t.preventDefault(),e.fetchAccount(t)}}},[e._v("Retry")])],1)]):s("div",[s("div",[s("el-card",{staticClass:"card-0 position-relative"},[s("div",{staticClass:"flex flex-column p-20"},[s("div",{staticClass:"flex justify-content-between align-items-baseline mb-1"},[s("div",{staticClass:"flex align-items-baseline"},[s("p",{staticClass:"blue-text s-24 m-0 p-0 bold-600"},[e._v(e._s(e._f("money")(e.form.balance)))]),e._v(" "),s("p",{staticClass:"text-uppercase blue-text s-14 m-0 p-0 ml-1"},[e._v(e._s(e.form.currency))])]),e._v(" "),s("div",[s("p",{staticClass:"text-uppercase s-12 bold-600 m-0 p-0"},[e._v(e._s(e.header))])])]),e._v(" "),s("div",[s("el-button",{staticClass:"z-depth-button bold-600 s-13 open-sans mini-button b-0",attrs:{size:"mini",plain:""},on:{click:e.viewTransactions}},[s("i",{staticClass:"undo icon"}),e._v(" View Transactions")])],1)]),e._v(" "),s("div",{staticClass:"border-top px-20 py-10"},[s("div",{staticClass:"flex"},[s("div"),e._v(" "),s("div",{staticClass:"flex flex-column ml-1"})])])]),e._v(" "),s("el-card",{staticClass:"my-2"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v(e._s(e.header)+" Details")])]),e._v(" "),s("div",[e.hasNoData?s("div",{staticClass:"center h-80"},[e._v("\n                        "+e._s(e.noData)+"\n                    ")]):e._e(),e._v(" "),e.hasNoData?e._e():s("div",[s("div",{staticClass:"flex"},[s("div",{staticClass:"w-50"},e._l(e.data,function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1"},[s("el-col",{attrs:{span:8}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-14"},[e._v(e._s(a))])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("p",{},[e._v(e._s(t))])])],1)}),1),e._v(" "),s("div",{staticClass:"w-50"},e._l(e.data2,function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1"},[s("el-col",{attrs:{span:8}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-14"},[e._v(e._s(a))])]),e._v(" "),s("el-col",{attrs:{span:16}},[s("p",{},[e._v(e._s(t))])])],1)}),1)])])])]),e._v(" "),s("el-card",{staticClass:"my-2"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v(e._s(e.header)+" Settings")])]),e._v(" "),s("div",[e.hasNoData?s("div",{staticClass:"center h-80"},[e._v("\n                        "+e._s(e.noData)+"\n                    ")]):e._e(),e._v(" "),e.hasNoData?e._e():s("div",[s("div",{staticClass:"flex"},[s("div",{staticClass:"w-50"},e._l(e.settings.slice(0,e.settings.length/2),function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1",attrs:{type:"flex",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-12"},[e._v(e._s(t.name))])]),e._v(" "),s("el-col",{attrs:{span:12}})],1)}),1),e._v(" "),s("div",{staticClass:"w-50"},e._l(e.settings.slice(e.settings.length/2,e.settings.length),function(t,a,n){return s("el-row",{key:n,staticClass:"mb-1",attrs:{type:"flex",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("p",{staticClass:"m-0 text-capitalize menu-gray-text s-12"},[e._v(e._s(t.name))])]),e._v(" "),s("el-col",{attrs:{span:12}})],1)}),1)])])])]),e._v(" "),s("el-card",{staticClass:"my-2 card-0"},[s("div",{staticClass:"flex align-items-baseline justify-content-between",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"blue-text bold-600 s-16"},[e._v(e._s(e.header)+" Services")]),e._v(" "),s("el-button",{staticClass:"z-depth-button s-13 open-sans mini-button b-0",attrs:{plain:"",size:"mini",icon:"plus icon"},on:{click:function(t){e.branchVisible=!0}}},[e._v("Add Service")])],1),e._v(" "),s("div",[s("el-table",{staticClass:"breathe",attrs:{"row-style":e.styleObject,"row-class-name":"transactions-table-body","header-row-class-name":"transactions-table-header",data:e.services.slice(5*e.page-5,5*e.page)}},[s("el-table-column",{attrs:{type:"index"}}),e._v(" "),e._l(e.servicesColumns,function(e,t){return s("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop}})}),e._v(" "),s("el-table-column",{attrs:{label:"Amount"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                "+e._s(e._f("money")(t.row.amount))+"\n                            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"Date"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                "+e._s(e._f("moment")(t.row.created_at,"D MMM,YY hh:mm A"))+"\n                            ")]}}])})],2),e._v(" "),s("div",{staticClass:"flex justify-content-between align-items-center px-20"},[s("div",{staticClass:"s-12"},[e._v("\n                            "+e._s(e.services.slice(5*e.page-5,5*e.page).length)+" results\n                        ")]),e._v(" "),s("el-pagination",{staticClass:"my-2 p-0 flex justify-content-end",attrs:{"page-size":5,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),s("branches-table",{attrs:{header:e.header}}),e._v(" "),s("users-table",{attrs:{header:e.header}})],1)])])},staticRenderFns:[]};var S=s("VU/8")(k,A,!1,function(e){s("ssHK")},"data-v-de582eb8",null);t.default=S.exports},B1FG:function(e,t){},ssHK:function(e,t){},uShJ:function(e,t){},uVE2:function(e,t){}});
//# sourceMappingURL=1.b90bea601291e3165dd4.js.map